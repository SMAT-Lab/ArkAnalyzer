"use strict";var M=require("path"),Ue=require("fs"),zn=require("url"),Un=require("tty"),Xe=require("util"),Ie=require("os"),Vi=require("constants"),Jn=require("stream"),Vn=require("assert"),qi=require("zlib"),Gi=require("net");function Yt(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var z=Yt(M),de=Yt(Ue),Hi=Yt(zn),Ki=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Yi=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Zi=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Zt={Space_Separator:Ki,ID_Start:Yi,ID_Continue:Zi},R={isSpaceSeparator(e){return typeof e=="string"&&Zt.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Zt.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="\u200C"||e==="\u200D"||Zt.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Xt,ee,ye,yt,Be,fe,H,Qt,Qe;var Xi=function(t,n){Xt=String(t),ee="start",ye=[],yt=0,Be=1,fe=0,H=void 0,Qt=void 0,Qe=void 0;do H=Qi(),no[ee]();while(H.type!=="eof");return typeof n=="function"?en({"":Qe},"",n):Qe};function en(e,t,n){const r=e[t];if(r!=null&&typeof r=="object")if(Array.isArray(r))for(let u=0;u<r.length;u++){const i=String(u),o=en(r,i,n);o===void 0?delete r[i]:Object.defineProperty(r,i,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const u in r){const i=en(r,u,n);i===void 0?delete r[u]:Object.defineProperty(r,u,{value:i,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,r)}let x,O,et,Ce,b;function Qi(){for(x="default",O="",et=!1,Ce=1;;){b=ge();const e=qn[x]();if(e)return e}}function ge(){if(Xt[yt])return String.fromCodePoint(Xt.codePointAt(yt))}function h(){const e=ge();return e===`
`?(Be++,fe=0):e?fe+=e.length:fe++,e&&(yt+=e.length),e}const qn={default(){switch(b){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":h();return;case"/":h(),x="comment";return;case void 0:return h(),k("eof")}if(R.isSpaceSeparator(b)){h();return}return qn[ee]()},comment(){switch(b){case"*":h(),x="multiLineComment";return;case"/":h(),x="singleLineComment";return}throw L(h())},multiLineComment(){switch(b){case"*":h(),x="multiLineCommentAsterisk";return;case void 0:throw L(h())}h()},multiLineCommentAsterisk(){switch(b){case"*":h();return;case"/":h(),x="default";return;case void 0:throw L(h())}h(),x="multiLineComment"},singleLineComment(){switch(b){case`
`:case"\r":case"\u2028":case"\u2029":h(),x="default";return;case void 0:return h(),k("eof")}h()},value(){switch(b){case"{":case"[":return k("punctuator",h());case"n":return h(),Me("ull"),k("null",null);case"t":return h(),Me("rue"),k("boolean",!0);case"f":return h(),Me("alse"),k("boolean",!1);case"-":case"+":h()==="-"&&(Ce=-1),x="sign";return;case".":O=h(),x="decimalPointLeading";return;case"0":O=h(),x="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":O=h(),x="decimalInteger";return;case"I":return h(),Me("nfinity"),k("numeric",1/0);case"N":return h(),Me("aN"),k("numeric",NaN);case'"':case"'":et=h()==='"',O="",x="string";return}throw L(h())},identifierNameStartEscape(){if(b!=="u")throw L(h());h();const e=tn();switch(e){case"$":case"_":break;default:if(!R.isIdStartChar(e))throw Gn();break}O+=e,x="identifierName"},identifierName(){switch(b){case"$":case"_":case"\u200C":case"\u200D":O+=h();return;case"\\":h(),x="identifierNameEscape";return}if(R.isIdContinueChar(b)){O+=h();return}return k("identifier",O)},identifierNameEscape(){if(b!=="u")throw L(h());h();const e=tn();switch(e){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!R.isIdContinueChar(e))throw Gn();break}O+=e,x="identifierName"},sign(){switch(b){case".":O=h(),x="decimalPointLeading";return;case"0":O=h(),x="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":O=h(),x="decimalInteger";return;case"I":return h(),Me("nfinity"),k("numeric",Ce*(1/0));case"N":return h(),Me("aN"),k("numeric",NaN)}throw L(h())},zero(){switch(b){case".":O+=h(),x="decimalPoint";return;case"e":case"E":O+=h(),x="decimalExponent";return;case"x":case"X":O+=h(),x="hexadecimal";return}return k("numeric",Ce*0)},decimalInteger(){switch(b){case".":O+=h(),x="decimalPoint";return;case"e":case"E":O+=h(),x="decimalExponent";return}if(R.isDigit(b)){O+=h();return}return k("numeric",Ce*Number(O))},decimalPointLeading(){if(R.isDigit(b)){O+=h(),x="decimalFraction";return}throw L(h())},decimalPoint(){switch(b){case"e":case"E":O+=h(),x="decimalExponent";return}if(R.isDigit(b)){O+=h(),x="decimalFraction";return}return k("numeric",Ce*Number(O))},decimalFraction(){switch(b){case"e":case"E":O+=h(),x="decimalExponent";return}if(R.isDigit(b)){O+=h();return}return k("numeric",Ce*Number(O))},decimalExponent(){switch(b){case"+":case"-":O+=h(),x="decimalExponentSign";return}if(R.isDigit(b)){O+=h(),x="decimalExponentInteger";return}throw L(h())},decimalExponentSign(){if(R.isDigit(b)){O+=h(),x="decimalExponentInteger";return}throw L(h())},decimalExponentInteger(){if(R.isDigit(b)){O+=h();return}return k("numeric",Ce*Number(O))},hexadecimal(){if(R.isHexDigit(b)){O+=h(),x="hexadecimalInteger";return}throw L(h())},hexadecimalInteger(){if(R.isHexDigit(b)){O+=h();return}return k("numeric",Ce*Number(O))},string(){switch(b){case"\\":h(),O+=eo();return;case'"':if(et)return h(),k("string",O);O+=h();return;case"'":if(!et)return h(),k("string",O);O+=h();return;case`
`:case"\r":throw L(h());case"\u2028":case"\u2029":ro(b);break;case void 0:throw L(h())}O+=h()},start(){switch(b){case"{":case"[":return k("punctuator",h())}x="value"},beforePropertyName(){switch(b){case"$":case"_":O=h(),x="identifierName";return;case"\\":h(),x="identifierNameStartEscape";return;case"}":return k("punctuator",h());case'"':case"'":et=h()==='"',x="string";return}if(R.isIdStartChar(b)){O+=h(),x="identifierName";return}throw L(h())},afterPropertyName(){if(b===":")return k("punctuator",h());throw L(h())},beforePropertyValue(){x="value"},afterPropertyValue(){switch(b){case",":case"}":return k("punctuator",h())}throw L(h())},beforeArrayValue(){if(b==="]")return k("punctuator",h());x="value"},afterArrayValue(){switch(b){case",":case"]":return k("punctuator",h())}throw L(h())},end(){throw L(h())}};function k(e,t){return{type:e,value:t,line:Be,column:fe}}function Me(e){for(const t of e){if(ge()!==t)throw L(h());h()}}function eo(){switch(ge()){case"b":return h(),"\b";case"f":return h(),"\f";case"n":return h(),`
`;case"r":return h(),"\r";case"t":return h(),"	";case"v":return h(),"\v";case"0":if(h(),R.isDigit(ge()))throw L(h());return"\0";case"x":return h(),to();case"u":return h(),tn();case`
`:case"\u2028":case"\u2029":return h(),"";case"\r":return h(),ge()===`
`&&h(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw L(h());case void 0:throw L(h())}return h()}function to(){let e="",t=ge();if(!R.isHexDigit(t)||(e+=h(),t=ge(),!R.isHexDigit(t)))throw L(h());return e+=h(),String.fromCodePoint(parseInt(e,16))}function tn(){let e="",t=4;for(;t-- >0;){const n=ge();if(!R.isHexDigit(n))throw L(h());e+=h()}return String.fromCodePoint(parseInt(e,16))}const no={start(){if(H.type==="eof")throw ke();nn()},beforePropertyName(){switch(H.type){case"identifier":case"string":Qt=H.value,ee="afterPropertyName";return;case"punctuator":Ct();return;case"eof":throw ke()}},afterPropertyName(){if(H.type==="eof")throw ke();ee="beforePropertyValue"},beforePropertyValue(){if(H.type==="eof")throw ke();nn()},beforeArrayValue(){if(H.type==="eof")throw ke();if(H.type==="punctuator"&&H.value==="]"){Ct();return}nn()},afterPropertyValue(){if(H.type==="eof")throw ke();switch(H.value){case",":ee="beforePropertyName";return;case"}":Ct()}},afterArrayValue(){if(H.type==="eof")throw ke();switch(H.value){case",":ee="beforeArrayValue";return;case"]":Ct()}},end(){}};function nn(){let e;switch(H.type){case"punctuator":switch(H.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=H.value;break}if(Qe===void 0)Qe=e;else{const t=ye[ye.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,Qt,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")ye.push(e),Array.isArray(e)?ee="beforeArrayValue":ee="beforePropertyName";else{const t=ye[ye.length-1];t==null?ee="end":Array.isArray(t)?ee="afterArrayValue":ee="afterPropertyValue"}}function Ct(){ye.pop();const e=ye[ye.length-1];e==null?ee="end":Array.isArray(e)?ee="afterArrayValue":ee="afterPropertyValue"}function L(e){return gt(e===void 0?`JSON5: invalid end of input at ${Be}:${fe}`:`JSON5: invalid character '${Hn(e)}' at ${Be}:${fe}`)}function ke(){return gt(`JSON5: invalid end of input at ${Be}:${fe}`)}function Gn(){return fe-=5,gt(`JSON5: invalid identifier character at ${Be}:${fe}`)}function ro(e){console.warn(`JSON5: '${Hn(e)}' in strings is not valid ECMAScript; consider escaping`)}function Hn(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function gt(e){const t=new SyntaxError(e);return t.lineNumber=Be,t.columnNumber=fe,t}var uo=function(t,n,r){const u=[];let i="",o,s,a="",D;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(r=n.space,D=n.quote,n=n.replacer),typeof n=="function")s=n;else if(Array.isArray(n)){o=[];for(const F of n){let p;typeof F=="string"?p=F:(typeof F=="number"||F instanceof String||F instanceof Number)&&(p=String(F)),p!==void 0&&o.indexOf(p)<0&&o.push(p)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),a="          ".substr(0,r)):typeof r=="string"&&(a=r.substr(0,10)),c("",{"":t});function c(F,p){let m=p[F];switch(m!=null&&(typeof m.toJSON5=="function"?m=m.toJSON5(F):typeof m.toJSON=="function"&&(m=m.toJSON(F))),s&&(m=s.call(p,F,m)),m instanceof Number?m=Number(m):m instanceof String?m=String(m):m instanceof Boolean&&(m=m.valueOf()),m){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof m=="string")return l(m);if(typeof m=="number")return String(m);if(typeof m=="object")return Array.isArray(m)?E(m):f(m)}function l(F){const p={"'":.1,'"':.2},m={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let S="";for(let C=0;C<F.length;C++){const g=F[C];switch(g){case"'":case'"':p[g]++,S+=g;continue;case"\0":if(R.isDigit(F[C+1])){S+="\\x00";continue}}if(m[g]){S+=m[g];continue}if(g<" "){let G=g.charCodeAt(0).toString(16);S+="\\x"+("00"+G).substring(G.length);continue}S+=g}const w=D||Object.keys(p).reduce((C,g)=>p[C]<p[g]?C:g);return S=S.replace(new RegExp(w,"g"),m[w]),w+S+w}function f(F){if(u.indexOf(F)>=0)throw TypeError("Converting circular structure to JSON5");u.push(F);let p=i;i=i+a;let m=o||Object.keys(F),S=[];for(const C of m){const g=c(C,F);if(g!==void 0){let G=d(C)+":";a!==""&&(G+=" "),G+=g,S.push(G)}}let w;if(S.length===0)w="{}";else{let C;if(a==="")C=S.join(","),w="{"+C+"}";else{let g=`,
`+i;C=S.join(g),w=`{
`+i+C+`,
`+p+"}"}}return u.pop(),i=p,w}function d(F){if(F.length===0)return l(F);const p=String.fromCodePoint(F.codePointAt(0));if(!R.isIdStartChar(p))return l(F);for(let m=p.length;m<F.length;m++)if(!R.isIdContinueChar(String.fromCodePoint(F.codePointAt(m))))return l(F);return F}function E(F){if(u.indexOf(F)>=0)throw TypeError("Converting circular structure to JSON5");u.push(F);let p=i;i=i+a;let m=[];for(let w=0;w<F.length;w++){const C=c(String(w),F);m.push(C!==void 0?C:"null")}let S;if(m.length===0)S="[]";else if(a==="")S="["+m.join(",")+"]";else{let w=`,
`+i,C=m.join(w);S=`[
`+i+C+`,
`+p+"]"}return u.pop(),i=p,S}};const io={parse:Xi,stringify:uo};var Kn=io,rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},un={exports:{}},At={exports:{}},on,Yn;function oo(){if(Yn)return on;Yn=1;var e=1e3,t=e*60,n=t*60,r=n*24,u=r*7,i=r*365.25;on=function(c,l){l=l||{};var f=typeof c;if(f==="string"&&c.length>0)return o(c);if(f==="number"&&isFinite(c))return l.long?a(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(l){var f=parseFloat(l[1]),d=(l[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"weeks":case"week":case"w":return f*u;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(c){var l=Math.abs(c);return l>=r?Math.round(c/r)+"d":l>=n?Math.round(c/n)+"h":l>=t?Math.round(c/t)+"m":l>=e?Math.round(c/e)+"s":c+"ms"}function a(c){var l=Math.abs(c);return l>=r?D(c,l,r,"day"):l>=n?D(c,l,n,"hour"):l>=t?D(c,l,t,"minute"):l>=e?D(c,l,e,"second"):c+" ms"}function D(c,l,f,d){var E=l>=f*1.5;return Math.round(c/f)+" "+d+(E?"s":"")}return on}var sn,Zn;function Xn(){if(Zn)return sn;Zn=1;function e(t){r.debug=r,r.default=r,r.coerce=D,r.disable=o,r.enable=i,r.enabled=s,r.humanize=oo(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function n(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(l){let f,d=null,E,F;function p(...m){if(!p.enabled)return;const S=p,w=Number(new Date),C=w-(f||w);S.diff=C,S.prev=f,S.curr=w,f=w,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let g=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(Ee,_e)=>{if(Ee==="%%")return"%";g++;const B=r.formatters[_e];if(typeof B=="function"){const N=m[g];Ee=B.call(S,N),m.splice(g,1),g--}return Ee}),r.formatArgs.call(S,m),(S.log||r.log).apply(S,m)}return p.namespace=l,p.useColors=r.useColors(),p.color=r.selectColor(l),p.extend=u,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(E!==r.namespaces&&(E=r.namespaces,F=r.enabled(l)),F),set:m=>{d=m}}),typeof r.init=="function"&&r.init(p),p}function u(l,f){const d=r(this.namespace+(typeof f>"u"?":":f)+l);return d.log=this.log,d}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f;const d=(typeof l=="string"?l:"").split(/[\s,]+/),E=d.length;for(f=0;f<E;f++)d[f]&&(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){const l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function D(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return sn=e,sn}var Qn;function so(){return Qn||(Qn=1,function(e,t){t.formatArgs=r,t.save=u,t.load=i,t.useColors=n,t.storage=o(),t.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const D="color: "+this.color;a.splice(1,0,D,"color: inherit");let c=0,l=0;a[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(c++,f==="%c"&&(l=c))}),a.splice(l,0,D)}t.log=console.debug||console.log||(()=>{});function u(a){try{a?t.storage.setItem("debug",a):t.storage.removeItem("debug")}catch{}}function i(){let a;try{a=t.storage.getItem("debug")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}function o(){try{return localStorage}catch{}}e.exports=Xn()(t);const{formatters:s}=e.exports;s.j=function(a){try{return JSON.stringify(a)}catch(D){return"[UnexpectedJSONParseError]: "+D.message}}}(At,At.exports)),At.exports}var St={exports:{}},an,er;function ao(){return er||(er=1,an=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),u=t.indexOf("--");return r!==-1&&(u===-1||r<u)}),an}var cn,tr;function co(){if(tr)return cn;tr=1;const e=Ie,t=Un,n=ao(),{env:r}=process;let u;n("no-color")||n("no-colors")||n("color=false")||n("color=never")?u=0:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(u=1),"FORCE_COLOR"in r&&(r.FORCE_COLOR==="true"?u=1:r.FORCE_COLOR==="false"?u=0:u=r.FORCE_COLOR.length===0?1:Math.min(parseInt(r.FORCE_COLOR,10),3));function i(a){return a===0?!1:{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function o(a,D){if(u===0)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(a&&!D&&u===void 0)return 0;const c=u||0;if(r.TERM==="dumb")return c;if(process.platform==="win32"){const l=e.release().split(".");return Number(l[0])>=10&&Number(l[2])>=10586?Number(l[2])>=14931?3:2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(l=>l in r)||r.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if(r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in r){const l=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return l>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)||"COLORTERM"in r?1:c}function s(a){const D=o(a,a&&a.isTTY);return i(D)}return cn={supportsColor:s,stdout:i(o(!0,t.isatty(1))),stderr:i(o(!0,t.isatty(2)))},cn}var nr;function lo(){return nr||(nr=1,function(e,t){const n=Un,r=Xe;t.init=c,t.log=s,t.formatArgs=i,t.save=a,t.load=D,t.useColors=u,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const f=co();f&&(f.stderr||f).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(f=>/^debug_/i.test(f)).reduce((f,d)=>{const E=d.substring(6).toLowerCase().replace(/_([a-z])/g,(p,m)=>m.toUpperCase());let F=process.env[d];return/^(yes|on|true|enabled)$/i.test(F)?F=!0:/^(no|off|false|disabled)$/i.test(F)?F=!1:F==="null"?F=null:F=Number(F),f[E]=F,f},{});function u(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}function i(f){const{namespace:d,useColors:E}=this;if(E){const F=this.color,p="\x1B[3"+(F<8?F:"8;5;"+F),m=`  ${p};1m${d} \x1B[0m`;f[0]=m+f[0].split(`
`).join(`
`+m),f.push(p+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else f[0]=o()+d+" "+f[0]}function o(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...f){return process.stderr.write(r.format(...f)+`
`)}function a(f){f?process.env.DEBUG=f:delete process.env.DEBUG}function D(){return process.env.DEBUG}function c(f){f.inspectOpts={};const d=Object.keys(t.inspectOpts);for(let E=0;E<d.length;E++)f.inspectOpts[d[E]]=t.inspectOpts[d[E]]}e.exports=Xn()(t);const{formatters:l}=e.exports;l.o=function(f){return this.inspectOpts.colors=this.useColors,r.inspect(f,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},l.O=function(f){return this.inspectOpts.colors=this.useColors,r.inspect(f,this.inspectOpts)}}(St,St.exports)),St.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?un.exports=so():un.exports=lo();var Y=un.exports,fo=Do;function Je(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function Do(e){if(e=e||{},e.circles)return po(e);return e.proto?r:n;function t(u,i){for(var o=Object.keys(u),s=new Array(o.length),a=0;a<o.length;a++){var D=o[a],c=u[D];typeof c!="object"||c===null?s[D]=c:c instanceof Date?s[D]=new Date(c):ArrayBuffer.isView(c)?s[D]=Je(c):s[D]=i(c)}return s}function n(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return t(u,n);if(u instanceof Map)return new Map(t(Array.from(u),n));if(u instanceof Set)return new Set(t(Array.from(u),n));var i={};for(var o in u)if(Object.hasOwnProperty.call(u,o)!==!1){var s=u[o];typeof s!="object"||s===null?i[o]=s:s instanceof Date?i[o]=new Date(s):s instanceof Map?i[o]=new Map(t(Array.from(s),n)):s instanceof Set?i[o]=new Set(t(Array.from(s),n)):ArrayBuffer.isView(s)?i[o]=Je(s):i[o]=n(s)}return i}function r(u){if(typeof u!="object"||u===null)return u;if(u instanceof Date)return new Date(u);if(Array.isArray(u))return t(u,r);if(u instanceof Map)return new Map(t(Array.from(u),r));if(u instanceof Set)return new Set(t(Array.from(u),r));var i={};for(var o in u){var s=u[o];typeof s!="object"||s===null?i[o]=s:s instanceof Date?i[o]=new Date(s):s instanceof Map?i[o]=new Map(t(Array.from(s),r)):s instanceof Set?i[o]=new Set(t(Array.from(s),r)):ArrayBuffer.isView(s)?i[o]=Je(s):i[o]=r(s)}return i}}function po(e){var t=[],n=[];return e.proto?i:u;function r(o,s){for(var a=Object.keys(o),D=new Array(a.length),c=0;c<a.length;c++){var l=a[c],f=o[l];if(typeof f!="object"||f===null)D[l]=f;else if(f instanceof Date)D[l]=new Date(f);else if(ArrayBuffer.isView(f))D[l]=Je(f);else{var d=t.indexOf(f);d!==-1?D[l]=n[d]:D[l]=s(f)}}return D}function u(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,u);if(o instanceof Map)return new Map(r(Array.from(o),u));if(o instanceof Set)return new Set(r(Array.from(o),u));var s={};t.push(o),n.push(s);for(var a in o)if(Object.hasOwnProperty.call(o,a)!==!1){var D=o[a];if(typeof D!="object"||D===null)s[a]=D;else if(D instanceof Date)s[a]=new Date(D);else if(D instanceof Map)s[a]=new Map(r(Array.from(D),u));else if(D instanceof Set)s[a]=new Set(r(Array.from(D),u));else if(ArrayBuffer.isView(D))s[a]=Je(D);else{var c=t.indexOf(D);c!==-1?s[a]=n[c]:s[a]=u(D)}}return t.pop(),n.pop(),s}function i(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return r(o,i);if(o instanceof Map)return new Map(r(Array.from(o),i));if(o instanceof Set)return new Set(r(Array.from(o),i));var s={};t.push(o),n.push(s);for(var a in o){var D=o[a];if(typeof D!="object"||D===null)s[a]=D;else if(D instanceof Date)s[a]=new Date(D);else if(D instanceof Map)s[a]=new Map(r(Array.from(D),i));else if(D instanceof Set)s[a]=new Set(r(Array.from(D),i));else if(ArrayBuffer.isView(D))s[a]=Je(D);else{var c=t.indexOf(D);c!==-1?s[a]=n[c]:s[a]=i(D)}}return t.pop(),n.pop(),s}}const mo=Xe,Le=Y("log4js:configuration"),wt=[],vt=[],rr=e=>!e,ur=e=>e&&typeof e=="object"&&!Array.isArray(e),ho=e=>/^[A-Za-z][A-Za-z0-9_]*$/g.test(e),Fo=e=>e&&typeof e=="number"&&Number.isInteger(e),Eo=e=>{vt.push(e),Le(`Added listener, now ${vt.length} listeners`)},yo=e=>{wt.push(e),Le(`Added pre-processing listener, now ${wt.length} listeners`)},ir=(e,t,n)=>{(Array.isArray(t)?t:[t]).forEach(u=>{if(u)throw new Error(`Problem with log4js configuration: (${mo.inspect(e,{depth:5})}) - ${n}`)})},Co=e=>{Le("New configuration to be validated: ",e),ir(e,rr(ur(e)),"must be an object."),Le(`Calling pre-processing listeners (${wt.length})`),wt.forEach(t=>t(e)),Le("Configuration pre-processing finished."),Le(`Calling configuration listeners (${vt.length})`),vt.forEach(t=>t(e)),Le("Configuration finished.")};var Ve={configure:Co,addListener:Eo,addPreProcessingListener:yo,throwExceptionIf:ir,anObject:ur,anInteger:Fo,validIdentifier:ho,not:rr},or={exports:{}};(function(e){function t(D,c){for(var l=D.toString();l.length<c;)l="0"+l;return l}function n(D){return t(D,2)}function r(D){var c=Math.abs(D),l=String(Math.floor(c/60)),f=String(c%60);return l=("0"+l).slice(-2),f=("0"+f).slice(-2),D===0?"Z":(D<0?"+":"-")+l+":"+f}function u(D,c){typeof D!="string"&&(c=D,D=e.exports.ISO8601_FORMAT),c||(c=e.exports.now());var l=n(c.getDate()),f=n(c.getMonth()+1),d=n(c.getFullYear()),E=n(d.substring(2,4)),F=D.indexOf("yyyy")>-1?d:E,p=n(c.getHours()),m=n(c.getMinutes()),S=n(c.getSeconds()),w=t(c.getMilliseconds(),3),C=r(c.getTimezoneOffset()),g=D.replace(/dd/g,l).replace(/MM/g,f).replace(/y{1,4}/g,F).replace(/hh/g,p).replace(/mm/g,m).replace(/ss/g,S).replace(/SSS/g,w).replace(/O/g,C);return g}function i(D,c,l,f){D["set"+(f?"":"UTC")+c](l)}function o(D,c,l){var f=D.indexOf("O")<0,d=!1,E=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(C,g){i(C,"FullYear",g,f)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(C,g){i(C,"Month",g-1,f),C.getMonth()!==g-1&&(d=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(C,g){d&&i(C,"Month",C.getMonth()-1,f),i(C,"Date",g,f)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(C,g){i(C,"Hours",g,f)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(C,g){i(C,"Minutes",g,f)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(C,g){i(C,"Seconds",g,f)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(C,g){i(C,"Milliseconds",g,f)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(C,g){g==="Z"?g=0:g=g.replace(":","");var G=Math.abs(g),Ee=(g>0?-1:1)*(G%100+Math.floor(G/100)*60);C.setUTCMinutes(C.getUTCMinutes()+Ee)}}],F=E.reduce(function(C,g){return g.pattern.test(C.regexp)?(g.index=C.regexp.match(g.pattern).index,C.regexp=C.regexp.replace(g.pattern,"("+g.regexp+")")):g.index=-1,C},{regexp:D,index:[]}),p=E.filter(function(C){return C.index>-1});p.sort(function(C,g){return C.index-g.index});var m=new RegExp(F.regexp),S=m.exec(c);if(S){var w=l||e.exports.now();return p.forEach(function(C,g){C.fn(w,S[g+1])}),w}throw new Error("String '"+c+"' could not be parsed as '"+D+"'")}function s(D,c,l){if(!D)throw new Error("pattern must be supplied");return o(D,c,l)}function a(){return new Date}e.exports=u,e.exports.asString=u,e.exports.parse=s,e.exports.now=a,e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"})(or);var ln=or.exports;const $e=ln,sr=Ie,tt=Xe,nt=M,ar=zn,cr=Y("log4js:layouts"),lr={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[91,39],yellow:[33,39]};function fr(e){return e?`\x1B[${lr[e][0]}m`:""}function Dr(e){return e?`\x1B[${lr[e][1]}m`:""}function go(e,t){return fr(t)+e+Dr(t)}function dr(e,t){return go(tt.format("[%s] [%s] %s - ",$e.asString(e.startTime),e.level.toString(),e.categoryName),t)}function pr(e){return dr(e)+tt.format(...e.data)}function Bt(e){return dr(e,e.level.colour)+tt.format(...e.data)}function mr(e){return tt.format(...e.data)}function hr(e){return e.data[0]}function Fr(e,t){const n="%r %p %c - %m%n",r=/%(-?[0-9]+)?(\.?-?[0-9]+)?([[\]cdhmnprzxXyflosCMAF%])(\{([^}]+)\})?|([^%]+)/;e=e||n;function u(y,v){let A=y.categoryName;if(v){const _=parseInt(v,10),$=A.split(".");_<$.length&&(A=$.slice($.length-_).join("."))}return A}function i(y,v){let A=$e.ISO8601_FORMAT;if(v)switch(A=v,A){case"ISO8601":case"ISO8601_FORMAT":A=$e.ISO8601_FORMAT;break;case"ISO8601_WITH_TZ_OFFSET":case"ISO8601_WITH_TZ_OFFSET_FORMAT":A=$e.ISO8601_WITH_TZ_OFFSET_FORMAT;break;case"ABSOLUTE":process.emitWarning("Pattern %d{ABSOLUTE} is deprecated in favor of %d{ABSOLUTETIME}. Please use %d{ABSOLUTETIME} instead.","DeprecationWarning","log4js-node-DEP0003"),cr("[log4js-node-DEP0003]","DEPRECATION: Pattern %d{ABSOLUTE} is deprecated and replaced by %d{ABSOLUTETIME}.");case"ABSOLUTETIME":case"ABSOLUTETIME_FORMAT":A=$e.ABSOLUTETIME_FORMAT;break;case"DATE":process.emitWarning("Pattern %d{DATE} is deprecated due to the confusion it causes when used. Please use %d{DATETIME} instead.","DeprecationWarning","log4js-node-DEP0004"),cr("[log4js-node-DEP0004]","DEPRECATION: Pattern %d{DATE} is deprecated and replaced by %d{DATETIME}.");case"DATETIME":case"DATETIME_FORMAT":A=$e.DATETIME_FORMAT;break}return $e.asString(A,y.startTime)}function o(){return sr.hostname().toString()}function s(y){return tt.format(...y.data)}function a(){return sr.EOL}function D(y){return y.level.toString()}function c(y){return $e.asString("hh:mm:ss",y.startTime)}function l(y){return fr(y.level.colour)}function f(y){return Dr(y.level.colour)}function d(){return"%"}function E(y){return y&&y.pid?y.pid.toString():process.pid.toString()}function F(){return E()}function p(y,v){return typeof t[v]<"u"?typeof t[v]=="function"?t[v](y):t[v]:null}function m(y,v){const A=y.context[v];return typeof A<"u"?typeof A=="function"?A(y):A:null}function S(y,v){let A=y.fileName||"";if(A=function($){const ve="file://";return $.startsWith(ve)&&(typeof ar.fileURLToPath=="function"?$=ar.fileURLToPath($):($=nt.normalize($.replace(new RegExp(`^${ve}`),"")),process.platform==="win32"&&($.startsWith("\\")?$=$.slice(1):$=nt.sep+nt.sep+$))),$}(A),v){const $=parseInt(v,10),ve=A.split(nt.sep);ve.length>$&&(A=ve.slice(-$).join(nt.sep))}return A}function w(y){return y.lineNumber?`${y.lineNumber}`:""}function C(y){return y.columnNumber?`${y.columnNumber}`:""}function g(y){return y.callStack||""}function G(y){return y.className||""}function Ee(y){return y.functionName||""}function _e(y){return y.functionAlias||""}function B(y){return y.callerName||""}const N={c:u,d:i,h:o,m:s,n:a,p:D,r:c,"[":l,"]":f,y:F,z:E,"%":d,x:p,X:m,f:S,l:w,o:C,s:g,C:G,M:Ee,A:_e,F:B};function T(y,v,A){return N[y](v,A)}function V(y,v){let A;return y?(A=parseInt(y.slice(1),10),A>0?v.slice(0,A):v.slice(A)):v}function q(y,v){let A;if(y)if(y.charAt(0)==="-")for(A=parseInt(y.slice(1),10);v.length<A;)v+=" ";else for(A=parseInt(y,10);v.length<A;)v=` ${v}`;return v}function W(y,v,A){let _=y;return _=V(v,_),_=q(A,_),_}return function(y){let v="",A,_=e;for(;(A=r.exec(_))!==null;){const $=A[1],ve=A[2],zi=A[3],Ui=A[5],Wn=A[6];if(Wn)v+=Wn.toString();else{const Ji=T(zi,y,Ui);v+=W(Ji,ve,$)}_=_.slice(A.index+A[0].length)}return v}}const fn={messagePassThrough(){return mr},basic(){return pr},colored(){return Bt},coloured(){return Bt},pattern(e){return Fr(e&&e.pattern,e&&e.tokens)},dummy(){return hr}};var Er={basicLayout:pr,messagePassThroughLayout:mr,patternLayout:Fr,colouredLayout:Bt,coloredLayout:Bt,dummyLayout:hr,addLayout(e,t){fn[e]=t},layout(e,t){return fn[e]&&fn[e](t)}};const U=Ve,yr=["white","grey","black","blue","cyan","green","magenta","red","yellow"];class K{constructor(t,n,r){this.level=t,this.levelStr=n,this.colour=r}toString(){return this.levelStr}static getLevel(t,n){return t?t instanceof K?t:(t instanceof Object&&t.levelStr&&(t=t.levelStr),K[t.toString().toUpperCase()]||n):n}static addLevels(t){t&&(Object.keys(t).forEach(r=>{const u=r.toUpperCase();K[u]=new K(t[r].value,u,t[r].colour);const i=K.levels.findIndex(o=>o.levelStr===u);i>-1?K.levels[i]=K[u]:K.levels.push(K[u])}),K.levels.sort((r,u)=>r.level-u.level))}isLessThanOrEqualTo(t){return typeof t=="string"&&(t=K.getLevel(t)),this.level<=t.level}isGreaterThanOrEqualTo(t){return typeof t=="string"&&(t=K.getLevel(t)),this.level>=t.level}isEqualTo(t){return typeof t=="string"&&(t=K.getLevel(t)),this.level===t.level}}K.levels=[],K.addLevels({ALL:{value:Number.MIN_VALUE,colour:"grey"},TRACE:{value:5e3,colour:"blue"},DEBUG:{value:1e4,colour:"cyan"},INFO:{value:2e4,colour:"green"},WARN:{value:3e4,colour:"yellow"},ERROR:{value:4e4,colour:"red"},FATAL:{value:5e4,colour:"magenta"},MARK:{value:9007199254740992,colour:"grey"},OFF:{value:Number.MAX_VALUE,colour:"grey"}}),U.addListener(e=>{const t=e.levels;t&&(U.throwExceptionIf(e,U.not(U.anObject(t)),"levels must be an object"),Object.keys(t).forEach(r=>{U.throwExceptionIf(e,U.not(U.validIdentifier(r)),`level name "${r}" is not a valid identifier (must start with a letter, only contain A-Z,a-z,0-9,_)`),U.throwExceptionIf(e,U.not(U.anObject(t[r])),`level "${r}" must be an object`),U.throwExceptionIf(e,U.not(t[r].value),`level "${r}" must have a 'value' property`),U.throwExceptionIf(e,U.not(U.anInteger(t[r].value)),`level "${r}".value must have an integer value`),U.throwExceptionIf(e,U.not(t[r].colour),`level "${r}" must have a 'colour' property`),U.throwExceptionIf(e,U.not(yr.indexOf(t[r].colour)>-1),`level "${r}".colour must be one of ${yr.join(", ")}`)}))}),U.addListener(e=>{K.addLevels(e.levels)});var qe=K;function Ao(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dn={exports:{}},rt={};const{parse:Cr,stringify:gr}=JSON,{keys:So}=Object,ut=String,Ar="string",Sr={},$t="object",wr=(e,t)=>t,wo=e=>e instanceof ut?ut(e):e,vo=(e,t)=>typeof t===Ar?new ut(t):t,vr=(e,t,n,r)=>{const u=[];for(let i=So(n),{length:o}=i,s=0;s<o;s++){const a=i[s],D=n[a];if(D instanceof ut){const c=e[D];typeof c===$t&&!t.has(c)?(t.add(c),n[a]=Sr,u.push({k:a,a:[e,t,c,r]})):n[a]=r.call(n,a,c)}else n[a]!==Sr&&(n[a]=r.call(n,a,D))}for(let{length:i}=u,o=0;o<i;o++){const{k:s,a}=u[o];n[s]=r.call(n,s,vr.apply(null,a))}return n},Br=(e,t,n)=>{const r=ut(t.push(n)-1);return e.set(n,r),r},$r=(e,t)=>{const n=Cr(e,vo).map(wo),r=n[0],u=t||wr,i=typeof r===$t&&r?vr(n,new Set,r,u):r;return u.call({"":i},"",i)};rt.parse=$r;const Or=(e,t,n)=>{const r=t&&typeof t===$t?(c,l)=>c===""||-1<t.indexOf(c)?l:void 0:t||wr,u=new Map,i=[],o=[];let s=+Br(u,i,r.call({"":e},"",e)),a=!s;for(;s<i.length;)a=!0,o[s]=gr(i[s++],D,n);return"["+o.join(",")+"]";function D(c,l){if(a)return a=!a,l;const f=r.call(this,c,l);switch(typeof f){case $t:if(f===null)return f;case Ar:return u.get(f)||Br(u,i,f)}return f}};rt.stringify=Or;const Bo=e=>Cr(Or(e));rt.toJSON=Bo;const $o=e=>$r(gr(e));rt.fromJSON=$o;const xr=rt,br=qe;class Oo{constructor(){const t={__LOG4JS_undefined__:void 0,__LOG4JS_NaN__:+"abc",__LOG4JS_Infinity__:1/0,"__LOG4JS_-Infinity__":-1/0};this.deMap=t,this.serMap={},Object.keys(this.deMap).forEach(n=>{const r=this.deMap[n];this.serMap[r]=n})}canSerialise(t){return typeof t=="string"?!1:t in this.serMap}serialise(t){return this.canSerialise(t)?this.serMap[t]:t}canDeserialise(t){return t in this.deMap}deserialise(t){return this.canDeserialise(t)?this.deMap[t]:t}}const Nr=new Oo;let xo=class Rn{constructor(t,n,r,u,i,o){if(this.startTime=new Date,this.categoryName=t,this.data=r,this.level=n,this.context=Object.assign({},u),this.pid=process.pid,this.error=o,typeof i<"u"){if(!i||typeof i!="object"||Array.isArray(i))throw new TypeError("Invalid location type passed to LoggingEvent constructor");this.constructor._getLocationKeys().forEach(s=>{typeof i[s]<"u"&&(this[s]=i[s])})}}static _getLocationKeys(){return["fileName","lineNumber","columnNumber","callStack","className","functionName","functionAlias","callerName"]}serialise(){return xr.stringify(this,(t,n)=>(n instanceof Error&&(n=Object.assign({message:n.message,stack:n.stack},n)),Nr.serialise(n)))}static deserialise(t){let n;try{const r=xr.parse(t,(u,i)=>{if(i&&i.message&&i.stack){const o=new Error(i);Object.keys(i).forEach(s=>{o[s]=i[s]}),i=o}return Nr.deserialise(i)});this._getLocationKeys().forEach(u=>{typeof r[u]<"u"&&(r.location||(r.location={}),r.location[u]=r[u])}),n=new Rn(r.categoryName,br.getLevel(r.level.levelStr),r.data,r.context,r.location,r.error),n.startTime=new Date(r.startTime),n.pid=r.pid,r.cluster&&(n.cluster=r.cluster)}catch(r){n=new Rn("log4js",br.ERROR,["Unable to parse log:",t,"because: ",r])}return n}};var Tr=xo;const oe=Y("log4js:clustering"),bo=Tr,No=Ve;let Ge=!1,se=null;try{se=require("cluster")}catch{oe("cluster module not present"),Ge=!0}const dn=[];let it=!1,ot="NODE_APP_INSTANCE";const _r=()=>it&&process.env[ot]==="0",pn=()=>Ge||se&&se.isMaster||_r(),Ir=e=>{dn.forEach(t=>t(e))},Ot=(e,t)=>{if(oe("cluster message received from worker ",e,": ",t),e.topic&&e.data&&(t=e,e=void 0),t&&t.topic&&t.topic==="log4js:message"){oe("received message: ",t.data);const n=bo.deserialise(t.data);Ir(n)}};Ge||No.addListener(e=>{dn.length=0,{pm2:it,disableClustering:Ge,pm2InstanceVar:ot="NODE_APP_INSTANCE"}=e,oe(`clustering disabled ? ${Ge}`),oe(`cluster.isMaster ? ${se&&se.isMaster}`),oe(`pm2 enabled ? ${it}`),oe(`pm2InstanceVar = ${ot}`),oe(`process.env[${ot}] = ${process.env[ot]}`),it&&process.removeListener("message",Ot),se&&se.removeListener&&se.removeListener("message",Ot),Ge||e.disableClustering?oe("Not listening for cluster messages, because clustering disabled."):_r()?(oe("listening for PM2 broadcast messages"),process.on("message",Ot)):se&&se.isMaster?(oe("listening for cluster messages"),se.on("message",Ot)):oe("not listening for messages, because we are not a master process")});var mn={onlyOnMaster:(e,t)=>pn()?e():t,isMaster:pn,send:e=>{pn()?Ir(e):(it||(e.cluster={workerId:se.worker.id,worker:process.pid}),process.send({topic:"log4js:message",data:e.serialise()}))},onMessage:e=>{dn.push(e)}},Mr={};function To(e){if(typeof e=="number"&&Number.isInteger(e))return e;const t={K:1024,M:1024*1024,G:1024*1024*1024},n=Object.keys(t),r=e.slice(-1).toLocaleUpperCase(),u=e.slice(0,-1).trim();if(n.indexOf(r)<0||!Number.isInteger(Number(u)))throw Error(`maxLogSize: "${e}" is invalid`);return u*t[r]}function _o(e,t){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{n[r]&&(n[r]=e[r](t[r]))}),n}function hn(e){return _o({maxLogSize:To},e)}const kr={dateFile:hn,file:hn,fileSync:hn};Mr.modifyConfig=e=>kr[e.type]?kr[e.type](e):e;var Lr={};const Io=console.log.bind(console);function Mo(e,t){return n=>{Io(e(n,t))}}function ko(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),Mo(n,e.timezoneOffset)}Lr.configure=ko;var jr={};function Lo(e,t){return n=>{process.stdout.write(`${e(n,t)}
`)}}function jo(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),Lo(n,e.timezoneOffset)}jr.configure=jo;var Pr={};function Po(e,t){return n=>{process.stderr.write(`${e(n,t)}
`)}}function Ro(e,t){let n=t.colouredLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),Po(n,e.timezoneOffset)}Pr.configure=Ro;var Rr={};function Wo(e,t,n,r){const u=r.getLevel(e),i=r.getLevel(t,r.FATAL);return o=>{const s=o.level;u.isLessThanOrEqualTo(s)&&i.isGreaterThanOrEqualTo(s)&&n(o)}}function zo(e,t,n,r){const u=n(e.appender);return Wo(e.level,e.maxLevel,u,r)}Rr.configure=zo;var Wr={};const zr=Y("log4js:categoryFilter");function Uo(e,t){return typeof e=="string"&&(e=[e]),n=>{zr(`Checking ${n.categoryName} against ${e}`),e.indexOf(n.categoryName)===-1&&(zr("Not excluded, sending to appender"),t(n))}}function Jo(e,t,n){const r=n(e.appender);return Uo(e.exclude,r)}Wr.configure=Jo;var Ur={};const Jr=Y("log4js:noLogFilter");function Vo(e){return e.filter(n=>n!=null&&n!=="")}function qo(e,t){return n=>{Jr(`Checking data: ${n.data} against filters: ${e}`),typeof e=="string"&&(e=[e]),e=Vo(e);const r=new RegExp(e.join("|"),"i");(e.length===0||n.data.findIndex(u=>r.test(u))<0)&&(Jr("Not excluded, sending to appender"),t(n))}}function Go(e,t,n){const r=n(e.appender);return qo(e.exclude,r)}Ur.configure=Go;var Vr={},qr={exports:{}},Fn={},te={};te.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,n)=>{arguments[arguments.length]=(r,u)=>{if(r)return n(r);t(u)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})},te.fromPromise=function(e){return Object.defineProperty(function(){const t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(n=>t(null,n),t)},"name",{value:e.name})};var Oe=Vi,Ho=process.cwd,xt=null,Ko=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return xt||(xt=Ho.call(process)),xt};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Gr=process.chdir;process.chdir=function(e){xt=null,Gr.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Gr)}var Yo=Zo;function Zo(e){Oe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=u(e.chmodSync),e.fchmodSync=u(e.fchmodSync),e.lchmodSync=u(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,l,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,l,f,d){d&&process.nextTick(d)},e.lchownSync=function(){}),Ko==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function l(f,d,E){var F=Date.now(),p=0;c(f,d,function m(S){if(S&&(S.code==="EACCES"||S.code==="EPERM"||S.code==="EBUSY")&&Date.now()-F<6e4){setTimeout(function(){e.stat(d,function(w,C){w&&w.code==="ENOENT"?c(f,d,m):E(S)})},p),p<100&&(p+=10);return}E&&E(S)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function l(f,d,E,F,p,m){var S;if(m&&typeof m=="function"){var w=0;S=function(C,g,G){if(C&&C.code==="EAGAIN"&&w<10)return w++,c.call(e,f,d,E,F,p,S);m.apply(this,arguments)}}return c.call(e,f,d,E,F,p,S)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(l,f,d,E,F){for(var p=0;;)try{return c.call(e,l,f,d,E,F)}catch(m){if(m.code==="EAGAIN"&&p<10){p++;continue}throw m}}}(e.readSync);function t(c){c.lchmod=function(l,f,d){c.open(l,Oe.O_WRONLY|Oe.O_SYMLINK,f,function(E,F){if(E){d&&d(E);return}c.fchmod(F,f,function(p){c.close(F,function(m){d&&d(p||m)})})})},c.lchmodSync=function(l,f){var d=c.openSync(l,Oe.O_WRONLY|Oe.O_SYMLINK,f),E=!0,F;try{F=c.fchmodSync(d,f),E=!1}finally{if(E)try{c.closeSync(d)}catch{}else c.closeSync(d)}return F}}function n(c){Oe.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(l,f,d,E){c.open(l,Oe.O_SYMLINK,function(F,p){if(F){E&&E(F);return}c.futimes(p,f,d,function(m){c.close(p,function(S){E&&E(m||S)})})})},c.lutimesSync=function(l,f,d){var E=c.openSync(l,Oe.O_SYMLINK),F,p=!0;try{F=c.futimesSync(E,f,d),p=!1}finally{if(p)try{c.closeSync(E)}catch{}else c.closeSync(E)}return F}):c.futimes&&(c.lutimes=function(l,f,d,E){E&&process.nextTick(E)},c.lutimesSync=function(){})}function r(c){return c&&function(l,f,d){return c.call(e,l,f,function(E){D(E)&&(E=null),d&&d.apply(this,arguments)})}}function u(c){return c&&function(l,f){try{return c.call(e,l,f)}catch(d){if(!D(d))throw d}}}function i(c){return c&&function(l,f,d,E){return c.call(e,l,f,d,function(F){D(F)&&(F=null),E&&E.apply(this,arguments)})}}function o(c){return c&&function(l,f,d){try{return c.call(e,l,f,d)}catch(E){if(!D(E))throw E}}}function s(c){return c&&function(l,f,d){typeof f=="function"&&(d=f,f=null);function E(F,p){p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),d&&d.apply(this,arguments)}return f?c.call(e,l,f,E):c.call(e,l,E)}}function a(c){return c&&function(l,f){var d=f?c.call(e,l,f):c.call(e,l);return d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),d}}function D(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}var Hr=Jn.Stream,Xo=Qo;function Qo(e){return{ReadStream:t,WriteStream:n};function t(r,u){if(!(this instanceof t))return new t(r,u);Hr.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,u=u||{};for(var o=Object.keys(u),s=0,a=o.length;s<a;s++){var D=o[s];this[D]=u[D]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(c,l){if(c){i.emit("error",c),i.readable=!1;return}i.fd=l,i.emit("open",l),i._read()})}function n(r,u){if(!(this instanceof n))return new n(r,u);Hr.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,u=u||{};for(var i=Object.keys(u),o=0,s=i.length;o<s;o++){var a=i[o];this[a]=u[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var es=ns,ts=Object.getPrototypeOf||function(e){return e.__proto__};function ns(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:ts(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var P=Ue,rs=Yo,us=Xo,is=es,bt=Xe,Z,Nt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Z=Symbol.for("graceful-fs.queue"),Nt=Symbol.for("graceful-fs.previous")):(Z="___graceful-fs.queue",Nt="___graceful-fs.previous");function os(){}function Kr(e,t){Object.defineProperty(e,Z,{get:function(){return t}})}var je=os;if(bt.debuglog?je=bt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(je=function(){var e=bt.format.apply(bt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)}),!P[Z]){var ss=rn[Z]||[];Kr(P,ss),P.close=function(e){function t(n,r){return e.call(P,n,function(u){u||Yr(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,Nt,{value:e}),t}(P.close),P.closeSync=function(e){function t(n){e.apply(P,arguments),Yr()}return Object.defineProperty(t,Nt,{value:e}),t}(P.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){je(P[Z]),Vn.equal(P[Z].length,0)})}rn[Z]||Kr(rn,P[Z]);var J=En(is(P));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!P.__patched&&(J=En(P),P.__patched=!0);function En(e){rs(e),e.gracefulify=En,e.createReadStream=g,e.createWriteStream=G;var t=e.readFile;e.readFile=n;function n(B,N,T){return typeof N=="function"&&(T=N,N=null),V(B,N,T);function V(q,W,y,v){return t(q,W,function(A){A&&(A.code==="EMFILE"||A.code==="ENFILE")?He([V,[q,W,y],A,v||Date.now(),Date.now()]):typeof y=="function"&&y.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=u;function u(B,N,T,V){return typeof T=="function"&&(V=T,T=null),q(B,N,T,V);function q(W,y,v,A,_){return r(W,y,v,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?He([q,[W,y,v,A],$,_||Date.now(),Date.now()]):typeof A=="function"&&A.apply(this,arguments)})}}var i=e.appendFile;i&&(e.appendFile=o);function o(B,N,T,V){return typeof T=="function"&&(V=T,T=null),q(B,N,T,V);function q(W,y,v,A,_){return i(W,y,v,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?He([q,[W,y,v,A],$,_||Date.now(),Date.now()]):typeof A=="function"&&A.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=a);function a(B,N,T,V){return typeof T=="function"&&(V=T,T=0),q(B,N,T,V);function q(W,y,v,A,_){return s(W,y,v,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?He([q,[W,y,v,A],$,_||Date.now(),Date.now()]):typeof A=="function"&&A.apply(this,arguments)})}}var D=e.readdir;e.readdir=l;var c=/^v[0-5]\./;function l(B,N,T){typeof N=="function"&&(T=N,N=null);var V=c.test(process.version)?function(y,v,A,_){return D(y,q(y,v,A,_))}:function(y,v,A,_){return D(y,v,q(y,v,A,_))};return V(B,N,T);function q(W,y,v,A){return function(_,$){_&&(_.code==="EMFILE"||_.code==="ENFILE")?He([V,[W,y,v],_,A||Date.now(),Date.now()]):($&&$.sort&&$.sort(),typeof v=="function"&&v.call(this,_,$))}}}if(process.version.substr(0,4)==="v0.8"){var f=us(e);m=f.ReadStream,w=f.WriteStream}var d=e.ReadStream;d&&(m.prototype=Object.create(d.prototype),m.prototype.open=S);var E=e.WriteStream;E&&(w.prototype=Object.create(E.prototype),w.prototype.open=C),Object.defineProperty(e,"ReadStream",{get:function(){return m},set:function(B){m=B},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return w},set:function(B){w=B},enumerable:!0,configurable:!0});var F=m;Object.defineProperty(e,"FileReadStream",{get:function(){return F},set:function(B){F=B},enumerable:!0,configurable:!0});var p=w;Object.defineProperty(e,"FileWriteStream",{get:function(){return p},set:function(B){p=B},enumerable:!0,configurable:!0});function m(B,N){return this instanceof m?(d.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}function S(){var B=this;_e(B.path,B.flags,B.mode,function(N,T){N?(B.autoClose&&B.destroy(),B.emit("error",N)):(B.fd=T,B.emit("open",T),B.read())})}function w(B,N){return this instanceof w?(E.apply(this,arguments),this):w.apply(Object.create(w.prototype),arguments)}function C(){var B=this;_e(B.path,B.flags,B.mode,function(N,T){N?(B.destroy(),B.emit("error",N)):(B.fd=T,B.emit("open",T))})}function g(B,N){return new e.ReadStream(B,N)}function G(B,N){return new e.WriteStream(B,N)}var Ee=e.open;e.open=_e;function _e(B,N,T,V){return typeof T=="function"&&(V=T,T=null),q(B,N,T,V);function q(W,y,v,A,_){return Ee(W,y,v,function($,ve){$&&($.code==="EMFILE"||$.code==="ENFILE")?He([q,[W,y,v,A],$,_||Date.now(),Date.now()]):typeof A=="function"&&A.apply(this,arguments)})}}return e}function He(e){je("ENQUEUE",e[0].name,e[1]),P[Z].push(e),yn()}var Tt;function Yr(){for(var e=Date.now(),t=0;t<P[Z].length;++t)P[Z][t].length>2&&(P[Z][t][3]=e,P[Z][t][4]=e);yn()}function yn(){if(clearTimeout(Tt),Tt=void 0,P[Z].length!==0){var e=P[Z].shift(),t=e[0],n=e[1],r=e[2],u=e[3],i=e[4];if(u===void 0)je("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-u>=6e4){je("TIMEOUT",t.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var s=Date.now()-i,a=Math.max(i-u,1),D=Math.min(a*1.2,100);s>=D?(je("RETRY",t.name,n),t.apply(null,n.concat([u]))):P[Z].push(e)}Tt===void 0&&(Tt=setTimeout(yn,0))}}(function(e){const t=te.fromCallback,n=J,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(u=>typeof n[u]=="function");Object.keys(n).forEach(u=>{u!=="promises"&&(e[u]=n[u])}),r.forEach(u=>{e[u]=t(n[u])}),e.exists=function(u,i){return typeof i=="function"?n.exists(u,i):new Promise(o=>n.exists(u,o))},e.read=function(u,i,o,s,a,D){return typeof D=="function"?n.read(u,i,o,s,a,D):new Promise((c,l)=>{n.read(u,i,o,s,a,(f,d,E)=>{if(f)return l(f);c({bytesRead:d,buffer:E})})})},e.write=function(u,i,...o){return typeof o[o.length-1]=="function"?n.write(u,i,...o):new Promise((s,a)=>{n.write(u,i,...o,(D,c,l)=>{if(D)return a(D);s({bytesWritten:c,buffer:l})})})},typeof n.realpath.native=="function"&&(e.realpath.native=t(n.realpath.native))})(Fn);const Cn=M;function Zr(e){return e=Cn.normalize(Cn.resolve(e)).split(Cn.sep),e.length>0?e[0]:null}const as=/[<>:"|?*]/;function cs(e){const t=Zr(e);return e=e.replace(t,""),as.test(e)}var Xr={getRootPath:Zr,invalidWin32Path:cs};const ls=J,gn=M,fs=Xr.invalidWin32Path,Ds=parseInt("0777",8);function An(e,t,n,r){if(typeof t=="function"?(n=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&fs(e)){const o=new Error(e+" contains invalid WIN32 path characters.");return o.code="EINVAL",n(o)}let u=t.mode;const i=t.fs||ls;u===void 0&&(u=Ds&~process.umask()),r||(r=null),n=n||function(){},e=gn.resolve(e),i.mkdir(e,u,o=>{if(!o)return r=r||e,n(null,r);switch(o.code){case"ENOENT":if(gn.dirname(e)===e)return n(o);An(gn.dirname(e),t,(s,a)=>{s?n(s,a):An(e,t,n,a)});break;default:i.stat(e,(s,a)=>{s||!a.isDirectory()?n(o,r):n(null,r)});break}})}var ds=An;const ps=J,Sn=M,ms=Xr.invalidWin32Path,hs=parseInt("0777",8);function wn(e,t,n){(!t||typeof t!="object")&&(t={mode:t});let r=t.mode;const u=t.fs||ps;if(process.platform==="win32"&&ms(e)){const i=new Error(e+" contains invalid WIN32 path characters.");throw i.code="EINVAL",i}r===void 0&&(r=hs&~process.umask()),n||(n=null),e=Sn.resolve(e);try{u.mkdirSync(e,r),n=n||e}catch(i){if(i.code==="ENOENT"){if(Sn.dirname(e)===e)throw i;n=wn(Sn.dirname(e),t,n),wn(e,t,n)}else{let o;try{o=u.statSync(e)}catch{throw i}if(!o.isDirectory())throw i}}return n}var Fs=wn;const Es=te.fromCallback,vn=Es(ds),Bn=Fs;var ae={mkdirs:vn,mkdirsSync:Bn,mkdirp:vn,mkdirpSync:Bn,ensureDir:vn,ensureDirSync:Bn};const Q=J,Qr=Ie,_t=M;function ys(){let e=_t.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=_t.join(Qr.tmpdir(),e);const t=new Date(1435410243862);Q.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=Q.openSync(e,"r+");return Q.futimesSync(n,t,t),Q.closeSync(n),Q.statSync(e).mtime>1435410243e3}function Cs(e){let t=_t.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=_t.join(Qr.tmpdir(),t);const n=new Date(1435410243862);Q.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",r=>{if(r)return e(r);Q.open(t,"r+",(u,i)=>{if(u)return e(u);Q.futimes(i,n,n,o=>{if(o)return e(o);Q.close(i,s=>{if(s)return e(s);Q.stat(t,(a,D)=>{if(a)return e(a);e(null,D.mtime>1435410243e3)})})})})})}function gs(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function As(e,t,n,r){Q.open(e,"r+",(u,i)=>{if(u)return r(u);Q.futimes(i,t,n,o=>{Q.close(i,s=>{r&&r(o||s)})})})}function Ss(e,t,n){const r=Q.openSync(e,"r+");return Q.futimesSync(r,t,n),Q.closeSync(r)}var eu={hasMillisRes:Cs,hasMillisResSync:ys,timeRemoveMillis:gs,utimesMillis:As,utimesMillisSync:Ss};const ce=J,re=M,tu=10,nu=5,ws=0,$n=process.versions.node.split("."),ru=Number.parseInt($n[0],10),uu=Number.parseInt($n[1],10),vs=Number.parseInt($n[2],10);function st(){if(ru>tu)return!0;if(ru===tu){if(uu>nu)return!0;if(uu===nu&&vs>=ws)return!0}return!1}function Bs(e,t,n){st()?ce.stat(e,{bigint:!0},(r,u)=>{if(r)return n(r);ce.stat(t,{bigint:!0},(i,o)=>i?i.code==="ENOENT"?n(null,{srcStat:u,destStat:null}):n(i):n(null,{srcStat:u,destStat:o}))}):ce.stat(e,(r,u)=>{if(r)return n(r);ce.stat(t,(i,o)=>i?i.code==="ENOENT"?n(null,{srcStat:u,destStat:null}):n(i):n(null,{srcStat:u,destStat:o}))})}function $s(e,t){let n,r;st()?n=ce.statSync(e,{bigint:!0}):n=ce.statSync(e);try{st()?r=ce.statSync(t,{bigint:!0}):r=ce.statSync(t)}catch(u){if(u.code==="ENOENT")return{srcStat:n,destStat:null};throw u}return{srcStat:n,destStat:r}}function Os(e,t,n,r){Bs(e,t,(u,i)=>{if(u)return r(u);const{srcStat:o,destStat:s}=i;return s&&s.ino&&s.dev&&s.ino===o.ino&&s.dev===o.dev?r(new Error("Source and destination must not be the same.")):o.isDirectory()&&xn(e,t)?r(new Error(at(e,t,n))):r(null,{srcStat:o,destStat:s})})}function xs(e,t,n){const{srcStat:r,destStat:u}=$s(e,t);if(u&&u.ino&&u.dev&&u.ino===r.ino&&u.dev===r.dev)throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&xn(e,t))throw new Error(at(e,t,n));return{srcStat:r,destStat:u}}function On(e,t,n,r,u){const i=re.resolve(re.dirname(e)),o=re.resolve(re.dirname(n));if(o===i||o===re.parse(o).root)return u();st()?ce.stat(o,{bigint:!0},(s,a)=>s?s.code==="ENOENT"?u():u(s):a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev?u(new Error(at(e,n,r))):On(e,t,o,r,u)):ce.stat(o,(s,a)=>s?s.code==="ENOENT"?u():u(s):a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev?u(new Error(at(e,n,r))):On(e,t,o,r,u))}function iu(e,t,n,r){const u=re.resolve(re.dirname(e)),i=re.resolve(re.dirname(n));if(i===u||i===re.parse(i).root)return;let o;try{st()?o=ce.statSync(i,{bigint:!0}):o=ce.statSync(i)}catch(s){if(s.code==="ENOENT")return;throw s}if(o.ino&&o.dev&&o.ino===t.ino&&o.dev===t.dev)throw new Error(at(e,n,r));return iu(e,t,i,r)}function xn(e,t){const n=re.resolve(e).split(re.sep).filter(u=>u),r=re.resolve(t).split(re.sep).filter(u=>u);return n.reduce((u,i,o)=>u&&r[o]===i,!0)}function at(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var It={checkPaths:Os,checkPathsSync:xs,checkParentPaths:On,checkParentPathsSync:iu,isSrcSubdir:xn},bn,ou;function bs(){return ou||(ou=1,bn=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}),bn}const j=J,ct=M,Ns=ae.mkdirsSync,Ts=eu.utimesMillisSync,lt=It;function _s(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);const{srcStat:r,destStat:u}=lt.checkPathsSync(e,t,"copy");return lt.checkParentPathsSync(e,r,t,"copy"),Is(u,e,t,n)}function Is(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const u=ct.dirname(n);return j.existsSync(u)||Ns(u),su(e,t,n,r)}function su(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return Ms(e,t,n,r)}function Ms(e,t,n,r){const i=(r.dereference?j.statSync:j.lstatSync)(t);if(i.isDirectory())return Ps(i,e,t,n,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return ks(i,e,t,n,r);if(i.isSymbolicLink())return zs(e,t,n,r)}function ks(e,t,n,r,u){return t?Ls(e,n,r,u):au(e,n,r,u)}function Ls(e,t,n,r){if(r.overwrite)return j.unlinkSync(n),au(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function au(e,t,n,r){return typeof j.copyFileSync=="function"?(j.copyFileSync(t,n),j.chmodSync(n,e.mode),r.preserveTimestamps?Ts(n,e.atime,e.mtime):void 0):js(e,t,n,r)}function js(e,t,n,r){const i=bs()(65536),o=j.openSync(t,"r"),s=j.openSync(n,"w",e.mode);let a=0;for(;a<e.size;){const D=j.readSync(o,i,0,65536,a);j.writeSync(s,i,0,D),a+=D}r.preserveTimestamps&&j.futimesSync(s,e.atime,e.mtime),j.closeSync(o),j.closeSync(s)}function Ps(e,t,n,r,u){if(!t)return Rs(e,n,r,u);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`);return cu(n,r,u)}function Rs(e,t,n,r){return j.mkdirSync(n),cu(t,n,r),j.chmodSync(n,e.mode)}function cu(e,t,n){j.readdirSync(e).forEach(r=>Ws(r,e,t,n))}function Ws(e,t,n,r){const u=ct.join(t,e),i=ct.join(n,e),{destStat:o}=lt.checkPathsSync(u,i,"copy");return su(o,u,i,r)}function zs(e,t,n,r){let u=j.readlinkSync(t);if(r.dereference&&(u=ct.resolve(process.cwd(),u)),e){let i;try{i=j.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return j.symlinkSync(u,n);throw o}if(r.dereference&&(i=ct.resolve(process.cwd(),i)),lt.isSrcSubdir(u,i))throw new Error(`Cannot copy '${u}' to a subdirectory of itself, '${i}'.`);if(j.statSync(n).isDirectory()&&lt.isSrcSubdir(i,u))throw new Error(`Cannot overwrite '${i}' with '${u}'.`);return Us(u,n)}else return j.symlinkSync(u,n)}function Us(e,t){return j.unlinkSync(t),j.symlinkSync(e,t)}var Js=_s,lu={copySync:Js};const Vs=te.fromPromise,fu=Fn;function qs(e){return fu.access(e).then(()=>!0).catch(()=>!1)}var Ae={pathExists:Vs(qs),pathExistsSync:fu.existsSync};const X=J,ft=M,Gs=ae.mkdirs,Hs=Ae.pathExists,Ks=eu.utimesMillis,Dt=It;function Ys(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),Dt.checkPaths(e,t,"copy",(u,i)=>{if(u)return r(u);const{srcStat:o,destStat:s}=i;Dt.checkParentPaths(e,o,t,"copy",a=>a?r(a):n.filter?du(Du,s,e,t,n,r):Du(s,e,t,n,r))})}function Du(e,t,n,r,u){const i=ft.dirname(n);Hs(i,(o,s)=>{if(o)return u(o);if(s)return Nn(e,t,n,r,u);Gs(i,a=>a?u(a):Nn(e,t,n,r,u))})}function du(e,t,n,r,u,i){Promise.resolve(u.filter(n,r)).then(o=>o?e(t,n,r,u,i):i(),o=>i(o))}function Nn(e,t,n,r,u){return r.filter?du(pu,e,t,n,r,u):pu(e,t,n,r,u)}function pu(e,t,n,r,u){(r.dereference?X.stat:X.lstat)(t,(o,s)=>{if(o)return u(o);if(s.isDirectory())return ea(s,e,t,n,r,u);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Zs(s,e,t,n,r,u);if(s.isSymbolicLink())return ra(e,t,n,r,u)})}function Zs(e,t,n,r,u,i){return t?Xs(e,n,r,u,i):mu(e,n,r,u,i)}function Xs(e,t,n,r,u){if(r.overwrite)X.unlink(n,i=>i?u(i):mu(e,t,n,r,u));else return r.errorOnExist?u(new Error(`'${n}' already exists`)):u()}function mu(e,t,n,r,u){return typeof X.copyFile=="function"?X.copyFile(t,n,i=>i?u(i):hu(e,n,r,u)):Qs(e,t,n,r,u)}function Qs(e,t,n,r,u){const i=X.createReadStream(t);i.on("error",o=>u(o)).once("open",()=>{const o=X.createWriteStream(n,{mode:e.mode});o.on("error",s=>u(s)).on("open",()=>i.pipe(o)).once("close",()=>hu(e,n,r,u))})}function hu(e,t,n,r){X.chmod(t,e.mode,u=>u?r(u):n.preserveTimestamps?Ks(t,e.atime,e.mtime,r):r())}function ea(e,t,n,r,u,i){return t?t&&!t.isDirectory()?i(new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`)):Fu(n,r,u,i):ta(e,n,r,u,i)}function ta(e,t,n,r,u){X.mkdir(n,i=>{if(i)return u(i);Fu(t,n,r,o=>o?u(o):X.chmod(n,e.mode,u))})}function Fu(e,t,n,r){X.readdir(e,(u,i)=>u?r(u):Eu(i,e,t,n,r))}function Eu(e,t,n,r,u){const i=e.pop();return i?na(e,i,t,n,r,u):u()}function na(e,t,n,r,u,i){const o=ft.join(n,t),s=ft.join(r,t);Dt.checkPaths(o,s,"copy",(a,D)=>{if(a)return i(a);const{destStat:c}=D;Nn(c,o,s,u,l=>l?i(l):Eu(e,n,r,u,i))})}function ra(e,t,n,r,u){X.readlink(t,(i,o)=>{if(i)return u(i);if(r.dereference&&(o=ft.resolve(process.cwd(),o)),e)X.readlink(n,(s,a)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?X.symlink(o,n,u):u(s):(r.dereference&&(a=ft.resolve(process.cwd(),a)),Dt.isSrcSubdir(o,a)?u(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${a}'.`)):e.isDirectory()&&Dt.isSrcSubdir(a,o)?u(new Error(`Cannot overwrite '${a}' with '${o}'.`)):ua(o,n,u)));else return X.symlink(o,n,u)})}function ua(e,t,n){X.unlink(t,r=>r?n(r):X.symlink(e,t,n))}var ia=Ys;const oa=te.fromCallback;var yu={copy:oa(ia)};const Cu=J,gu=M,I=Vn,dt=process.platform==="win32";function Au(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||Cu[n],n=n+"Sync",e[n]=e[n]||Cu[n]}),e.maxBusyTries=e.maxBusyTries||3}function Tn(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),I(e,"rimraf: missing path"),I.strictEqual(typeof e,"string","rimraf: path should be a string"),I.strictEqual(typeof n,"function","rimraf: callback function required"),I(t,"rimraf: invalid options argument provided"),I.strictEqual(typeof t,"object","rimraf: options should be object"),Au(t),Su(e,t,function u(i){if(i){if((i.code==="EBUSY"||i.code==="ENOTEMPTY"||i.code==="EPERM")&&r<t.maxBusyTries){r++;const o=r*100;return setTimeout(()=>Su(e,t,u),o)}i.code==="ENOENT"&&(i=null)}n(i)})}function Su(e,t,n){I(e),I(t),I(typeof n=="function"),t.lstat(e,(r,u)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&dt)return wu(e,t,r,n);if(u&&u.isDirectory())return Mt(e,t,r,n);t.unlink(e,i=>{if(i){if(i.code==="ENOENT")return n(null);if(i.code==="EPERM")return dt?wu(e,t,i,n):Mt(e,t,i,n);if(i.code==="EISDIR")return Mt(e,t,i,n)}return n(i)})})}function wu(e,t,n,r){I(e),I(t),I(typeof r=="function"),n&&I(n instanceof Error),t.chmod(e,438,u=>{u?r(u.code==="ENOENT"?null:n):t.stat(e,(i,o)=>{i?r(i.code==="ENOENT"?null:n):o.isDirectory()?Mt(e,t,n,r):t.unlink(e,r)})})}function vu(e,t,n){let r;I(e),I(t),n&&I(n instanceof Error);try{t.chmodSync(e,438)}catch(u){if(u.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(u){if(u.code==="ENOENT")return;throw n}r.isDirectory()?kt(e,t,n):t.unlinkSync(e)}function Mt(e,t,n,r){I(e),I(t),n&&I(n instanceof Error),I(typeof r=="function"),t.rmdir(e,u=>{u&&(u.code==="ENOTEMPTY"||u.code==="EEXIST"||u.code==="EPERM")?sa(e,t,r):u&&u.code==="ENOTDIR"?r(n):r(u)})}function sa(e,t,n){I(e),I(t),I(typeof n=="function"),t.readdir(e,(r,u)=>{if(r)return n(r);let i=u.length,o;if(i===0)return t.rmdir(e,n);u.forEach(s=>{Tn(gu.join(e,s),t,a=>{if(!o){if(a)return n(o=a);--i===0&&t.rmdir(e,n)}})})})}function Bu(e,t){let n;t=t||{},Au(t),I(e,"rimraf: missing path"),I.strictEqual(typeof e,"string","rimraf: path should be a string"),I(t,"rimraf: missing options"),I.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&dt&&vu(e,t,r)}try{n&&n.isDirectory()?kt(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return dt?vu(e,t,r):kt(e,t,r);if(r.code!=="EISDIR")throw r;kt(e,t,r)}}function kt(e,t,n){I(e),I(t),n&&I(n instanceof Error);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")aa(e,t);else if(r.code!=="ENOENT")throw r}}function aa(e,t){if(I(e),I(t),t.readdirSync(e).forEach(n=>Bu(gu.join(e,n),t)),dt){const n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}var ca=Tn;Tn.sync=Bu;const la=te.fromCallback,$u=ca;var Lt={remove:la($u),removeSync:$u.sync};const fa=te.fromCallback,Ou=J,xu=M,bu=ae,Nu=Lt,Tu=fa(function(t,n){n=n||function(){},Ou.readdir(t,(r,u)=>{if(r)return bu.mkdirs(t,n);u=u.map(o=>xu.join(t,o)),i();function i(){const o=u.pop();if(!o)return n();Nu.remove(o,s=>{if(s)return n(s);i()})}})});function _u(e){let t;try{t=Ou.readdirSync(e)}catch{return bu.mkdirsSync(e)}t.forEach(n=>{n=xu.join(e,n),Nu.removeSync(n)})}var Da={emptyDirSync:_u,emptydirSync:_u,emptyDir:Tu,emptydir:Tu};const da=te.fromCallback,Iu=M,pt=J,Mu=ae,pa=Ae.pathExists;function ma(e,t){function n(){pt.writeFile(e,"",r=>{if(r)return t(r);t()})}pt.stat(e,(r,u)=>{if(!r&&u.isFile())return t();const i=Iu.dirname(e);pa(i,(o,s)=>{if(o)return t(o);if(s)return n();Mu.mkdirs(i,a=>{if(a)return t(a);n()})})})}function ha(e){let t;try{t=pt.statSync(e)}catch{}if(t&&t.isFile())return;const n=Iu.dirname(e);pt.existsSync(n)||Mu.mkdirsSync(n),pt.writeFileSync(e,"")}var Fa={createFile:da(ma),createFileSync:ha};const Ea=te.fromCallback,ku=M,Pe=J,Lu=ae,ju=Ae.pathExists;function ya(e,t,n){function r(u,i){Pe.link(u,i,o=>{if(o)return n(o);n(null)})}ju(t,(u,i)=>{if(u)return n(u);if(i)return n(null);Pe.lstat(e,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const s=ku.dirname(t);ju(s,(a,D)=>{if(a)return n(a);if(D)return r(e,t);Lu.mkdirs(s,c=>{if(c)return n(c);r(e,t)})})})})}function Ca(e,t){if(Pe.existsSync(t))return;try{Pe.lstatSync(e)}catch(i){throw i.message=i.message.replace("lstat","ensureLink"),i}const r=ku.dirname(t);return Pe.existsSync(r)||Lu.mkdirsSync(r),Pe.linkSync(e,t)}var ga={createLink:Ea(ya),createLinkSync:Ca};const xe=M,mt=J,Aa=Ae.pathExists;function Sa(e,t,n){if(xe.isAbsolute(e))return mt.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{const r=xe.dirname(t),u=xe.join(r,e);return Aa(u,(i,o)=>i?n(i):o?n(null,{toCwd:u,toDst:e}):mt.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),n(s)):n(null,{toCwd:e,toDst:xe.relative(r,e)})))}}function wa(e,t){let n;if(xe.isAbsolute(e)){if(n=mt.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const r=xe.dirname(t),u=xe.join(r,e);if(n=mt.existsSync(u),n)return{toCwd:u,toDst:e};if(n=mt.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:xe.relative(r,e)}}}var va={symlinkPaths:Sa,symlinkPathsSync:wa};const Pu=J;function Ba(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);Pu.lstat(e,(r,u)=>{if(r)return n(null,"file");t=u&&u.isDirectory()?"dir":"file",n(null,t)})}function $a(e,t){let n;if(t)return t;try{n=Pu.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var Oa={symlinkType:Ba,symlinkTypeSync:$a};const xa=te.fromCallback,Ru=M,Ke=J,Wu=ae,ba=Wu.mkdirs,Na=Wu.mkdirsSync,zu=va,Ta=zu.symlinkPaths,_a=zu.symlinkPathsSync,Uu=Oa,Ia=Uu.symlinkType,Ma=Uu.symlinkTypeSync,Ju=Ae.pathExists;function ka(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,Ju(t,(u,i)=>{if(u)return r(u);if(i)return r(null);Ta(e,t,(o,s)=>{if(o)return r(o);e=s.toDst,Ia(s.toCwd,n,(a,D)=>{if(a)return r(a);const c=Ru.dirname(t);Ju(c,(l,f)=>{if(l)return r(l);if(f)return Ke.symlink(e,t,D,r);ba(c,d=>{if(d)return r(d);Ke.symlink(e,t,D,r)})})})})})}function La(e,t,n){if(Ke.existsSync(t))return;const u=_a(e,t);e=u.toDst,n=Ma(u.toCwd,n);const i=Ru.dirname(t);return Ke.existsSync(i)||Na(i),Ke.symlinkSync(e,t,n)}var ja={createSymlink:xa(ka),createSymlinkSync:La};const jt=Fa,Pt=ga,Rt=ja;var Pa={createFile:jt.createFile,createFileSync:jt.createFileSync,ensureFile:jt.createFile,ensureFileSync:jt.createFileSync,createLink:Pt.createLink,createLinkSync:Pt.createLinkSync,ensureLink:Pt.createLink,ensureLinkSync:Pt.createLinkSync,createSymlink:Rt.createSymlink,createSymlinkSync:Rt.createSymlinkSync,ensureSymlink:Rt.createSymlink,ensureSymlinkSync:Rt.createSymlinkSync},Ye;try{Ye=J}catch{Ye=Ue}function Ra(e,t,n){n==null&&(n=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var r=t.fs||Ye,u=!0;"throws"in t&&(u=t.throws),r.readFile(e,t,function(i,o){if(i)return n(i);o=qu(o);var s;try{s=JSON.parse(o,t?t.reviver:null)}catch(a){return u?(a.message=e+": "+a.message,n(a)):n(null,null)}n(null,s)})}function Wa(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var n=t.fs||Ye,r=!0;"throws"in t&&(r=t.throws);try{var u=n.readFileSync(e,t);return u=qu(u),JSON.parse(u,t.reviver)}catch(i){if(r)throw i.message=e+": "+i.message,i;return null}}function Vu(e,t){var n,r=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL));var u=JSON.stringify(e,t?t.replacer:null,n);return u.replace(/\n/g,r)+r}function za(e,t,n,r){r==null&&(r=n,n={}),n=n||{};var u=n.fs||Ye,i="";try{i=Vu(t,n)}catch(o){r&&r(o,null);return}u.writeFile(e,i,n,r)}function Ua(e,t,n){n=n||{};var r=n.fs||Ye,u=Vu(t,n);return r.writeFileSync(e,u,n)}function qu(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var Ja={readFile:Ra,readFileSync:Wa,writeFile:za,writeFileSync:Ua},Va=Ja;const Gu=te.fromCallback,Wt=Va;var _n={readJson:Gu(Wt.readFile),readJsonSync:Wt.readFileSync,writeJson:Gu(Wt.writeFile),writeJsonSync:Wt.writeFileSync};const qa=M,Ga=ae,Ha=Ae.pathExists,Hu=_n;function Ka(e,t,n,r){typeof n=="function"&&(r=n,n={});const u=qa.dirname(e);Ha(u,(i,o)=>{if(i)return r(i);if(o)return Hu.writeJson(e,t,n,r);Ga.mkdirs(u,s=>{if(s)return r(s);Hu.writeJson(e,t,n,r)})})}var Ya=Ka;const Za=J,Xa=M,Qa=ae,ec=_n;function tc(e,t,n){const r=Xa.dirname(e);Za.existsSync(r)||Qa.mkdirsSync(r),ec.writeJsonSync(e,t,n)}var nc=tc;const rc=te.fromCallback,ne=_n;ne.outputJson=rc(Ya),ne.outputJsonSync=nc,ne.outputJSON=ne.outputJson,ne.outputJSONSync=ne.outputJsonSync,ne.writeJSON=ne.writeJson,ne.writeJSONSync=ne.writeJsonSync,ne.readJSON=ne.readJson,ne.readJSONSync=ne.readJsonSync;var uc=ne;const Ku=J,ic=M,oc=lu.copySync,Yu=Lt.removeSync,sc=ae.mkdirpSync,Zu=It;function ac(e,t,n){n=n||{};const r=n.overwrite||n.clobber||!1,{srcStat:u}=Zu.checkPathsSync(e,t,"move");return Zu.checkParentPathsSync(e,u,t,"move"),sc(ic.dirname(t)),cc(e,t,r)}function cc(e,t,n){if(n)return Yu(t),Xu(e,t,n);if(Ku.existsSync(t))throw new Error("dest already exists.");return Xu(e,t,n)}function Xu(e,t,n){try{Ku.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return lc(e,t,n)}}function lc(e,t,n){return oc(e,t,{overwrite:n,errorOnExist:!0}),Yu(e)}var fc=ac,Dc={moveSync:fc};const dc=J,pc=M,mc=yu.copy,Qu=Lt.remove,hc=ae.mkdirp,Fc=Ae.pathExists,ei=It;function Ec(e,t,n,r){typeof n=="function"&&(r=n,n={});const u=n.overwrite||n.clobber||!1;ei.checkPaths(e,t,"move",(i,o)=>{if(i)return r(i);const{srcStat:s}=o;ei.checkParentPaths(e,s,t,"move",a=>{if(a)return r(a);hc(pc.dirname(t),D=>D?r(D):yc(e,t,u,r))})})}function yc(e,t,n,r){if(n)return Qu(t,u=>u?r(u):ti(e,t,n,r));Fc(t,(u,i)=>u?r(u):i?r(new Error("dest already exists.")):ti(e,t,n,r))}function ti(e,t,n,r){dc.rename(e,t,u=>u?u.code!=="EXDEV"?r(u):Cc(e,t,n,r):r())}function Cc(e,t,n,r){mc(e,t,{overwrite:n,errorOnExist:!0},i=>i?r(i):Qu(e,r))}var gc=Ec;const Ac=te.fromCallback;var Sc={move:Ac(gc)};const wc=te.fromCallback,ht=J,ni=M,ri=ae,vc=Ae.pathExists;function Bc(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");const u=ni.dirname(e);vc(u,(i,o)=>{if(i)return r(i);if(o)return ht.writeFile(e,t,n,r);ri.mkdirs(u,s=>{if(s)return r(s);ht.writeFile(e,t,n,r)})})}function $c(e,...t){const n=ni.dirname(e);if(ht.existsSync(n))return ht.writeFileSync(e,...t);ri.mkdirsSync(n),ht.writeFileSync(e,...t)}var Oc={outputFile:wc(Bc),outputFileSync:$c};(function(e){e.exports=Object.assign({},Fn,lu,yu,Da,Pa,uc,ae,Dc,Sc,Oc,Ae,Lt);const t=Ue;Object.getOwnPropertyDescriptor(t,"promises")&&Object.defineProperty(e.exports,"promises",{get(){return t.promises}})})(qr);var ui=qr.exports,xc=()=>new Date;const bc=Y("streamroller:fileNameFormatter"),Nc=M,Tc=".gz",_c=".";var Ic=({file:e,keepFileExt:t,needsIndex:n,alwaysIncludeDate:r,compress:u,fileNameSep:i})=>{let o=i||_c;const s=Nc.join(e.dir,e.name),a=d=>d+e.ext,D=(d,E,F)=>(n||!F)&&E?d+o+E:d,c=(d,E,F)=>(E>0||r)&&F?d+o+F:d,l=(d,E)=>E&&u?d+Tc:d,f=t?[c,D,a,l]:[a,c,D,l];return({date:d,index:E})=>(bc(`_formatFileName: date=${d}, index=${E}`),f.reduce((F,p)=>p(F,E,d),s))};const Re=Y("streamroller:fileNameParser"),ii=".gz",oi=ln,Mc=".";var kc=({file:e,keepFileExt:t,pattern:n,fileNameSep:r})=>{let u=r||Mc;const i=(f,d)=>f.endsWith(ii)?(Re("it is gzipped"),d.isCompressed=!0,f.slice(0,-1*ii.length)):f,o="__NOT_MATCHING__";let l=[i,t?f=>f.startsWith(e.name)&&f.endsWith(e.ext)?(Re("it starts and ends with the right things"),f.slice(e.name.length+1,-1*e.ext.length)):o:f=>f.startsWith(e.base)?(Re("it starts with the right things"),f.slice(e.base.length+1)):o,n?(f,d)=>{const E=f.split(u);let F=E[E.length-1];Re("items: ",E,", indexStr: ",F);let p=f;F!==void 0&&F.match(/^\d+$/)?(p=f.slice(0,-1*(F.length+1)),Re(`dateStr is ${p}`),n&&!p&&(p=F,F="0")):F="0";try{const m=oi.parse(n,p,new Date(0,0));return oi.asString(n,m)!==p?f:(d.index=parseInt(F,10),d.date=p,d.timestamp=m.getTime(),"")}catch(m){return Re(`Problem parsing ${p} as ${n}, error was: `,m),f}}:(f,d)=>f.match(/^\d+$/)?(Re("it has an index"),d.index=parseInt(f,10),""):f];return f=>{let d={filename:f,index:0,isCompressed:!1};return l.reduce((F,p)=>p(F,d),f)?null:d}};const ue=Y("streamroller:moveAndMaybeCompressFile"),Se=ui,Lc=qi,jc=function(e){const t={mode:parseInt("0600",8),compress:!1},n=Object.assign({},t,e);return ue(`_parseOption: moveAndMaybeCompressFile called with option=${JSON.stringify(n)}`),n},Pc=async(e,t,n)=>{if(n=jc(n),e===t){ue("moveAndMaybeCompressFile: source and target are the same, not doing anything");return}if(await Se.pathExists(e))if(ue(`moveAndMaybeCompressFile: moving file from ${e} to ${t} ${n.compress?"with":"without"} compress`),n.compress)await new Promise((r,u)=>{let i=!1;const o=Se.createWriteStream(t,{mode:n.mode,flags:"wx"}).on("open",()=>{i=!0;const s=Se.createReadStream(e).on("open",()=>{s.pipe(Lc.createGzip()).pipe(o)}).on("error",a=>{ue(`moveAndMaybeCompressFile: error reading ${e}`,a),o.destroy(a)})}).on("finish",()=>{ue(`moveAndMaybeCompressFile: finished compressing ${t}, deleting ${e}`),Se.unlink(e).then(r).catch(s=>{ue(`moveAndMaybeCompressFile: error deleting ${e}, truncating instead`,s),Se.truncate(e).then(r).catch(a=>{ue(`moveAndMaybeCompressFile: error truncating ${e}`,a),u(a)})})}).on("error",s=>{i?(ue(`moveAndMaybeCompressFile: error writing ${t}, deleting`,s),Se.unlink(t).then(()=>{u(s)}).catch(a=>{ue(`moveAndMaybeCompressFile: error deleting ${t}`,a),u(a)})):(ue(`moveAndMaybeCompressFile: error creating ${t}`,s),u(s))})}).catch(()=>{});else{ue(`moveAndMaybeCompressFile: renaming ${e} to ${t}`);try{await Se.move(e,t,{overwrite:!0})}catch(r){if(ue(`moveAndMaybeCompressFile: error renaming ${e} to ${t}`,r),r.code!=="ENOENT"){ue("moveAndMaybeCompressFile: trying copy+truncate instead");try{await Se.copy(e,t,{overwrite:!0}),await Se.truncate(e)}catch(u){ue("moveAndMaybeCompressFile: error copy+truncate",u)}}}}};var Rc=Pc;const ie=Y("streamroller:RollingFileWriteStream"),We=ui,ze=M,Wc=Ie,zt=xc,Ut=ln,{Writable:zc}=Jn,Uc=Ic,Jc=kc,Vc=Rc,qc=e=>(ie(`deleteFiles: files to delete: ${e}`),Promise.all(e.map(t=>We.unlink(t).catch(n=>{ie(`deleteFiles: error when unlinking ${t}, ignoring. Error was ${n}`)}))));let Gc=class extends zc{constructor(t,n){if(ie(`constructor: creating RollingFileWriteStream. path=${t}`),typeof t!="string"||t.length===0)throw new Error(`Invalid filename: ${t}`);if(t.endsWith(ze.sep))throw new Error(`Filename is a directory: ${t}`);t.indexOf(`~${ze.sep}`)===0&&(t=t.replace("~",Wc.homedir())),super(n),this.options=this._parseOption(n),this.fileObject=ze.parse(t),this.fileObject.dir===""&&(this.fileObject=ze.parse(ze.join(process.cwd(),t))),this.fileFormatter=Uc({file:this.fileObject,alwaysIncludeDate:this.options.alwaysIncludePattern,needsIndex:this.options.maxSize<Number.MAX_SAFE_INTEGER,compress:this.options.compress,keepFileExt:this.options.keepFileExt,fileNameSep:this.options.fileNameSep}),this.fileNameParser=Jc({file:this.fileObject,keepFileExt:this.options.keepFileExt,pattern:this.options.pattern,fileNameSep:this.options.fileNameSep}),this.state={currentSize:0},this.options.pattern&&(this.state.currentDate=Ut(this.options.pattern,zt())),this.filename=this.fileFormatter({index:0,date:this.state.currentDate}),["a","a+","as","as+"].includes(this.options.flags)&&this._setExistingSizeAndDate(),ie(`constructor: create new file ${this.filename}, state=${JSON.stringify(this.state)}`),this._renewWriteStream()}_setExistingSizeAndDate(){try{const t=We.statSync(this.filename);this.state.currentSize=t.size,this.options.pattern&&(this.state.currentDate=Ut(this.options.pattern,t.mtime))}catch{return}}_parseOption(t){const n={maxSize:0,numToKeep:Number.MAX_SAFE_INTEGER,encoding:"utf8",mode:parseInt("0600",8),flags:"a",compress:!1,keepFileExt:!1,alwaysIncludePattern:!1},r=Object.assign({},n,t);if(!r.maxSize)delete r.maxSize;else if(r.maxSize<=0)throw new Error(`options.maxSize (${r.maxSize}) should be > 0`);if(r.numBackups||r.numBackups===0){if(r.numBackups<0)throw new Error(`options.numBackups (${r.numBackups}) should be >= 0`);if(r.numBackups>=Number.MAX_SAFE_INTEGER)throw new Error(`options.numBackups (${r.numBackups}) should be < Number.MAX_SAFE_INTEGER`);r.numToKeep=r.numBackups+1}else if(r.numToKeep<=0)throw new Error(`options.numToKeep (${r.numToKeep}) should be > 0`);return ie(`_parseOption: creating stream with option=${JSON.stringify(r)}`),r}_final(t){this.currentFileStream.end("",this.options.encoding,t)}_write(t,n,r){this._shouldRoll().then(()=>{ie(`_write: writing chunk. file=${this.currentFileStream.path} state=${JSON.stringify(this.state)} chunk=${t}`),this.currentFileStream.write(t,n,u=>{this.state.currentSize+=t.length,r(u)})})}async _shouldRoll(){(this._dateChanged()||this._tooBig())&&(ie(`_shouldRoll: rolling because dateChanged? ${this._dateChanged()} or tooBig? ${this._tooBig()}`),await this._roll())}_dateChanged(){return this.state.currentDate&&this.state.currentDate!==Ut(this.options.pattern,zt())}_tooBig(){return this.state.currentSize>=this.options.maxSize}_roll(){return ie("_roll: closing the current stream"),new Promise((t,n)=>{this.currentFileStream.end("",this.options.encoding,()=>{this._moveOldFiles().then(t).catch(n)})})}async _moveOldFiles(){const t=await this._getExistingFiles(),n=this.state.currentDate?t.filter(r=>r.date===this.state.currentDate):t;for(let r=n.length;r>=0;r--){ie(`_moveOldFiles: i = ${r}`);const u=this.fileFormatter({date:this.state.currentDate,index:r}),i=this.fileFormatter({date:this.state.currentDate,index:r+1}),o={compress:this.options.compress&&r===0,mode:this.options.mode};await Vc(u,i,o)}this.state.currentSize=0,this.state.currentDate=this.state.currentDate?Ut(this.options.pattern,zt()):null,ie(`_moveOldFiles: finished rolling files. state=${JSON.stringify(this.state)}`),this._renewWriteStream(),await new Promise((r,u)=>{this.currentFileStream.write("","utf8",()=>{this._clean().then(r).catch(u)})})}async _getExistingFiles(){const t=await We.readdir(this.fileObject.dir).catch(()=>[]);ie(`_getExistingFiles: files=${t}`);const n=t.map(u=>this.fileNameParser(u)).filter(u=>u),r=u=>(u.timestamp?u.timestamp:zt().getTime())-u.index;return n.sort((u,i)=>r(u)-r(i)),n}_renewWriteStream(){const t=this.fileFormatter({date:this.state.currentDate,index:0}),n=i=>{try{return We.mkdirSync(i,{recursive:!0})}catch(o){if(o.code==="ENOENT")return n(ze.dirname(i)),n(i);if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(We.statSync(i).isDirectory())return i;throw o}catch{throw o}}};n(this.fileObject.dir);const r={flags:this.options.flags,encoding:this.options.encoding,mode:this.options.mode},u=function(i,o,s){return i[s]=i[o],delete i[o],i};We.appendFileSync(t,"",u({...r},"flags","flag")),this.currentFileStream=We.createWriteStream(t,r),this.currentFileStream.on("error",i=>{this.emit("error",i)})}async _clean(){const t=await this._getExistingFiles();if(ie(`_clean: numToKeep = ${this.options.numToKeep}, existingFiles = ${t.length}`),ie("_clean: existing files are: ",t),this._tooManyFiles(t.length)){const n=t.slice(0,t.length-this.options.numToKeep).map(r=>ze.format({dir:this.fileObject.dir,base:r.filename}));await qc(n)}}_tooManyFiles(t){return this.options.numToKeep>0&&t>this.options.numToKeep}};var In=Gc;const Hc=In;class Kc extends Hc{constructor(t,n,r,u){u||(u={}),n&&(u.maxSize=n),!u.numBackups&&u.numBackups!==0&&(!r&&r!==0&&(r=1),u.numBackups=r),super(t,u),this.backups=u.numBackups,this.size=this.options.maxSize}get theStream(){return this.currentFileStream}}var Yc=Kc;const Zc=In;class Xc extends Zc{constructor(t,n,r){n&&typeof n=="object"&&(r=n,n=null),r||(r={}),n||(n="yyyy-MM-dd"),r.pattern=n,!r.numBackups&&r.numBackups!==0?(!r.daysToKeep&&r.daysToKeep!==0?r.daysToKeep=1:process.emitWarning("options.daysToKeep is deprecated due to the confusion it causes when used together with file size rolling. Please use options.numBackups instead.","DeprecationWarning","streamroller-DEP0001"),r.numBackups=r.daysToKeep):r.daysToKeep=r.numBackups,super(t,r),this.mode=this.options.mode}get theStream(){return this.currentFileStream}}var Qc=Xc,si={RollingFileWriteStream:In,RollingFileStream:Yc,DateRollingFileStream:Qc};const ai=Y("log4js:file"),Mn=M,el=si,ci=Ie,tl=ci.EOL;let Jt=!1;const Vt=new Set;function li(){Vt.forEach(e=>{e.sighupHandler()})}function nl(e,t,n,r,u,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(Mn.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${Mn.sep}.+)`),ci.homedir()),e=Mn.normalize(e),r=!r&&r!==0?5:r,ai("Creating file appender (",e,", ",n,", ",r,", ",u,", ",i,")");function o(D,c,l,f){const d=new el.RollingFileStream(D,c,l,f);return d.on("error",E=>{console.error("log4js.fileAppender - Writing to file %s, error happened ",D,E)}),d.on("drain",()=>{process.emit("log4js:pause",!1)}),d}let s=o(e,n,r,u);const a=function(D){if(s.writable){if(u.removeColor===!0){const c=/\x1b[[0-9;]*m/g;D.data=D.data.map(l=>typeof l=="string"?l.replace(c,""):l)}s.write(t(D,i)+tl,"utf8")||process.emit("log4js:pause",!0)}};return a.reopen=function(){s.end(()=>{s=o(e,n,r,u)})},a.sighupHandler=function(){ai("SIGHUP handler called."),a.reopen()},a.shutdown=function(D){Vt.delete(a),Vt.size===0&&Jt&&(process.removeListener("SIGHUP",li),Jt=!1),s.end("","utf-8",D)},Vt.add(a),Jt||(process.on("SIGHUP",li),Jt=!0),a}function rl(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.mode=e.mode||384,nl(e.filename,n,e.maxLogSize,e.backups,e,e.timezoneOffset)}Vr.configure=rl;var fi={};const ul=si,il=Ie,ol=il.EOL;function sl(e,t,n){const r=new ul.DateRollingFileStream(e,t,n);return r.on("error",u=>{console.error("log4js.dateFileAppender - Writing to file %s, error happened ",e,u)}),r.on("drain",()=>{process.emit("log4js:pause",!1)}),r}function al(e,t,n,r,u){r.maxSize=r.maxLogSize;const i=sl(e,t,r),o=function(s){i.writable&&(i.write(n(s,u)+ol,"utf8")||process.emit("log4js:pause",!0))};return o.shutdown=function(s){i.end("","utf-8",s)},o}function cl(e,t){let n=t.basicLayout;return e.layout&&(n=t.layout(e.layout.type,e.layout)),e.alwaysIncludePattern||(e.alwaysIncludePattern=!1),e.mode=e.mode||384,al(e.filename,e.pattern,n,e,e.timezoneOffset)}fi.configure=cl;var Di={};const we=Y("log4js:fileSync"),pe=M,me=Ue,di=Ie,ll=di.EOL;function pi(e,t){const n=r=>{try{return me.mkdirSync(r,{recursive:!0})}catch(u){if(u.code==="ENOENT")return n(pe.dirname(r)),n(r);if(u.code!=="EEXIST"&&u.code!=="EROFS")throw u;try{if(me.statSync(r).isDirectory())return r;throw u}catch{throw u}}};n(pe.dirname(e)),me.appendFileSync(e,"",{mode:t.mode,flag:t.flags})}class fl{constructor(t,n,r,u){if(we("In RollingFileStream"),n<0)throw new Error(`maxLogSize (${n}) should be > 0`);this.filename=t,this.size=n,this.backups=r,this.options=u,this.currentSize=0;function i(o){let s=0;try{s=me.statSync(o).size}catch{pi(o,u)}return s}this.currentSize=i(this.filename)}shouldRoll(){return we("should roll with current size %d, and max size %d",this.currentSize,this.size),this.currentSize>=this.size}roll(t){const n=this,r=new RegExp(`^${pe.basename(t)}`);function u(D){return r.test(D)}function i(D){return parseInt(D.slice(`${pe.basename(t)}.`.length),10)||0}function o(D,c){return i(D)-i(c)}function s(D){const c=i(D);if(we(`Index of ${D} is ${c}`),n.backups===0)me.truncateSync(t,0);else if(c<n.backups){try{me.unlinkSync(`${t}.${c+1}`)}catch{}we(`Renaming ${D} -> ${t}.${c+1}`),me.renameSync(pe.join(pe.dirname(t),D),`${t}.${c+1}`)}}function a(){we("Renaming the old files"),me.readdirSync(pe.dirname(t)).filter(u).sort(o).reverse().forEach(s)}we("Rolling, rolling, rolling"),a()}write(t,n){const r=this;function u(){we("writing the chunk to the file"),r.currentSize+=t.length,me.appendFileSync(r.filename,t)}we("in write"),this.shouldRoll()&&(this.currentSize=0,this.roll(this.filename)),u()}}function Dl(e,t,n,r,u,i){if(typeof e!="string"||e.length===0)throw new Error(`Invalid filename: ${e}`);if(e.endsWith(pe.sep))throw new Error(`Filename is a directory: ${e}`);e=e.replace(new RegExp(`^~(?=${pe.sep}.+)`),di.homedir()),e=pe.normalize(e),r=!r&&r!==0?5:r,we("Creating fileSync appender (",e,", ",n,", ",r,", ",u,", ",i,")");function o(a,D,c){let l;return D?l=new fl(a,D,c,u):l=(f=>(pi(f,u),{write(d){me.appendFileSync(f,d)}}))(a),l}const s=o(e,n,r);return a=>{s.write(t(a,i)+ll)}}function dl(e,t){let n=t.basicLayout;e.layout&&(n=t.layout(e.layout.type,e.layout));const r={flags:e.flags||"a",encoding:e.encoding||"utf8",mode:e.mode||384};return Dl(e.filename,n,e.maxLogSize,e.backups,r,e.timezoneOffset)}Di.configure=dl;var mi={};const he=Y("log4js:tcp"),pl=Gi;function ml(e,t){let n=!1;const r=[];let u,i=3,o="__LOG4JS__";function s(l){he("Writing log event to socket"),n=u.write(`${t(l)}${o}`,"utf8")}function a(){let l;for(he("emptying buffer");l=r.shift();)s(l)}function D(){he(`appender creating socket to ${e.host||"localhost"}:${e.port||5e3}`),o=`${e.endMsg||"__LOG4JS__"}`,u=pl.createConnection(e.port||5e3,e.host||"localhost"),u.on("connect",()=>{he("socket connected"),a(),n=!0}),u.on("drain",()=>{he("drain event received, emptying buffer"),n=!0,a()}),u.on("timeout",u.end.bind(u)),u.on("error",l=>{he("connection error",l),n=!1,a()}),u.on("close",D)}D();function c(l){n?s(l):(he("buffering log event because it cannot write at the moment"),r.push(l))}return c.shutdown=function(l){he("shutdown called"),r.length&&i?(he("buffer has items, waiting 100ms to empty"),i-=1,setTimeout(()=>{c.shutdown(l)},100)):(u.removeAllListeners("close"),u.end(l))},c}function hl(e,t){he(`configure with config = ${e}`);let n=function(r){return r.serialise()};return e.layout&&(n=t.layout(e.layout.type,e.layout)),ml(e,n)}mi.configure=hl;const kn=M,be=Y("log4js:appenders"),le=Ve,hi=mn,Fl=qe,El=Er,yl=Mr,De=new Map;De.set("console",Lr),De.set("stdout",jr),De.set("stderr",Pr),De.set("logLevelFilter",Rr),De.set("categoryFilter",Wr),De.set("noLogFilter",Ur),De.set("file",Vr),De.set("dateFile",fi),De.set("fileSync",Di),De.set("tcp",mi);const Ft=new Map,qt=(e,t)=>{let n;try{const r=`${e}.cjs`;n=require.resolve(r),be("Loading module from ",r)}catch{n=e,be("Loading module from ",e)}try{return Ao(n)}catch(r){le.throwExceptionIf(t,r.code!=="MODULE_NOT_FOUND",`appender "${e}" could not be loaded (error was: ${r})`);return}},Cl=(e,t)=>De.get(e)||qt(`./${e}`,t)||qt(e,t)||require.main&&require.main.filename&&qt(kn.join(kn.dirname(require.main.filename),e),t)||qt(kn.join(process.cwd(),e),t),Gt=new Set,Fi=(e,t)=>{if(Ft.has(e))return Ft.get(e);if(!t.appenders[e])return!1;if(Gt.has(e))throw new Error(`Dependency loop detected for appender ${e}.`);Gt.add(e),be(`Creating appender ${e}`);const n=gl(e,t);return Gt.delete(e),Ft.set(e,n),n},gl=(e,t)=>{const n=t.appenders[e],r=n.type.configure?n.type:Cl(n.type,t);return le.throwExceptionIf(t,le.not(r),`appender "${e}" is not valid (type "${n.type}" could not be found)`),r.appender&&(process.emitWarning(`Appender ${n.type} exports an appender function.`,"DeprecationWarning","log4js-node-DEP0001"),be("[log4js-node-DEP0001]",`DEPRECATION: Appender ${n.type} exports an appender function.`)),r.shutdown&&(process.emitWarning(`Appender ${n.type} exports a shutdown function.`,"DeprecationWarning","log4js-node-DEP0002"),be("[log4js-node-DEP0002]",`DEPRECATION: Appender ${n.type} exports a shutdown function.`)),be(`${e}: clustering.isMaster ? ${hi.isMaster()}`),be(`${e}: appenderModule is ${Xe.inspect(r)}`),hi.onlyOnMaster(()=>(be(`calling appenderModule.configure for ${e} / ${n.type}`),r.configure(yl.modifyConfig(n),El,u=>Fi(u,t),Fl)),()=>{})},Ei=e=>{if(Ft.clear(),Gt.clear(),!e)return;const t=[];Object.values(e.categories).forEach(n=>{t.push(...n.appenders)}),Object.keys(e.appenders).forEach(n=>{(t.includes(n)||e.appenders[n].type==="tcp-server"||e.appenders[n].type==="multiprocess")&&Fi(n,e)})},yi=()=>{Ei()};yi(),le.addListener(e=>{le.throwExceptionIf(e,le.not(le.anObject(e.appenders)),'must have a property "appenders" of type object.');const t=Object.keys(e.appenders);le.throwExceptionIf(e,le.not(t.length),"must define at least one appender."),t.forEach(n=>{le.throwExceptionIf(e,le.not(e.appenders[n].type),`appender "${n}" is not valid (must be an object with property "type")`)})}),le.addListener(Ei),Dn.exports=Ft,Dn.exports.init=yi;var Ci=Dn.exports,gi={exports:{}};(function(e){const t=Y("log4js:categories"),n=Ve,r=qe,u=Ci,i=new Map;function o(p,m,S){if(m.inherit===!1)return;const w=S.lastIndexOf(".");if(w<0)return;const C=S.slice(0,w);let g=p.categories[C];g||(g={inherit:!0,appenders:[]}),o(p,g,C),!p.categories[C]&&g.appenders&&g.appenders.length&&g.level&&(p.categories[C]=g),m.appenders=m.appenders||[],m.level=m.level||g.level,g.appenders.forEach(G=>{m.appenders.includes(G)||m.appenders.push(G)}),m.parent=g}function s(p){if(!p.categories)return;Object.keys(p.categories).forEach(S=>{const w=p.categories[S];o(p,w,S)})}n.addPreProcessingListener(p=>s(p)),n.addListener(p=>{n.throwExceptionIf(p,n.not(n.anObject(p.categories)),'must have a property "categories" of type object.');const m=Object.keys(p.categories);n.throwExceptionIf(p,n.not(m.length),"must define at least one category."),m.forEach(S=>{const w=p.categories[S];n.throwExceptionIf(p,[n.not(w.appenders),n.not(w.level)],`category "${S}" is not valid (must be an object with properties "appenders" and "level")`),n.throwExceptionIf(p,n.not(Array.isArray(w.appenders)),`category "${S}" is not valid (appenders must be an array of appender names)`),n.throwExceptionIf(p,n.not(w.appenders.length),`category "${S}" is not valid (appenders must contain at least one appender name)`),Object.prototype.hasOwnProperty.call(w,"enableCallStack")&&n.throwExceptionIf(p,typeof w.enableCallStack!="boolean",`category "${S}" is not valid (enableCallStack must be boolean type)`),w.appenders.forEach(C=>{n.throwExceptionIf(p,n.not(u.get(C)),`category "${S}" is not valid (appender "${C}" is not defined)`)}),n.throwExceptionIf(p,n.not(r.getLevel(w.level)),`category "${S}" is not valid (level "${w.level}" not recognised; valid levels are ${r.levels.join(", ")})`)}),n.throwExceptionIf(p,n.not(p.categories.default),'must define a "default" category.')});const a=p=>{if(i.clear(),!p)return;Object.keys(p.categories).forEach(S=>{const w=p.categories[S],C=[];w.appenders.forEach(g=>{C.push(u.get(g)),t(`Creating category ${S}`),i.set(S,{appenders:C,level:r.getLevel(w.level),enableCallStack:w.enableCallStack||!1})})})},D=()=>{a()};D(),n.addListener(a);const c=p=>{if(t(`configForCategory: searching for config for ${p}`),i.has(p))return t(`configForCategory: ${p} exists in config, returning it`),i.get(p);let m;return p.indexOf(".")>0?(t(`configForCategory: ${p} has hierarchy, cloning from parents`),m={...c(p.slice(0,p.lastIndexOf(".")))}):(i.has("default")||a({categories:{default:{appenders:["out"],level:"OFF"}}}),t("configForCategory: cloning default category"),m={...i.get("default")}),i.set(p,m),m},l=p=>c(p).appenders,f=p=>c(p).level,d=(p,m)=>{c(p).level=m},E=p=>c(p).enableCallStack===!0,F=(p,m)=>{c(p).enableCallStack=m};e.exports=i,e.exports=Object.assign(e.exports,{appendersForCategory:l,getLevelForCategory:f,setLevelForCategory:d,getEnableCallStackForCategory:E,setEnableCallStackForCategory:F,init:D})})(gi);var Ai=gi.exports;const Si=Y("log4js:logger"),Al=Tr,Fe=qe,Sl=mn,Ht=Ai,wi=Ve,wl=/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/,Ln=1,vi=3;function Bi(e,t=vi+Ln){try{const n=e.stack.split(`
`).slice(t);if(!n.length)return null;const r=wl.exec(n[0]);if(r&&r.length===6){let u="",i="",o="";return r[1]&&r[1]!==""&&([i,o]=r[1].replace(/[[\]]/g,"").split(" as "),o=o||"",i.includes(".")&&([u,i]=i.split("."))),{fileName:r[2],lineNumber:parseInt(r[3],10),columnNumber:parseInt(r[4],10),callStack:n.join(`
`),className:u,functionName:i,functionAlias:o,callerName:r[1]||""}}else console.error("log4js.logger - defaultParseCallStack error")}catch(n){console.error("log4js.logger - defaultParseCallStack error",n)}return null}let jn=class{constructor(t){if(!t)throw new Error("No category provided.");this.category=t,this.context={},this.callStackSkipIndex=0,this.parseCallStack=Bi,Si(`Logger created (${this.category}, ${this.level})`)}get level(){return Fe.getLevel(Ht.getLevelForCategory(this.category),Fe.OFF)}set level(t){Ht.setLevelForCategory(this.category,Fe.getLevel(t,this.level))}get useCallStack(){return Ht.getEnableCallStackForCategory(this.category)}set useCallStack(t){Ht.setEnableCallStackForCategory(this.category,t===!0)}get callStackLinesToSkip(){return this.callStackSkipIndex}set callStackLinesToSkip(t){if(typeof t!="number")throw new TypeError("Must be a number");if(t<0)throw new RangeError("Must be >= 0");this.callStackSkipIndex=t}log(t,...n){const r=Fe.getLevel(t);r?this.isLevelEnabled(r)&&this._log(r,n):wi.validIdentifier(t)&&n.length>0?(this.log(Fe.WARN,"log4js:logger.log: valid log-level not found as first parameter given:",t),this.log(Fe.INFO,`[${t}]`,...n)):this.log(Fe.INFO,t,...n)}isLevelEnabled(t){return this.level.isLessThanOrEqualTo(t)}_log(t,n){Si(`sending log data (${t}) to appenders`);const r=n.find(o=>o instanceof Error);let u;if(this.useCallStack){try{r&&(u=this.parseCallStack(r,this.callStackSkipIndex+Ln))}catch{}u=u||this.parseCallStack(new Error,this.callStackSkipIndex+vi+Ln)}const i=new Al(this.category,t,n,this.context,u,r);Sl.send(i)}addContext(t,n){this.context[t]=n}removeContext(t){delete this.context[t]}clearContext(){this.context={}}setParseCallStackFunction(t){if(typeof t=="function")this.parseCallStack=t;else if(typeof t>"u")this.parseCallStack=Bi;else throw new TypeError("Invalid type passed to setParseCallStackFunction")}};function $i(e){const t=Fe.getLevel(e),r=t.toString().toLowerCase().replace(/_([a-z])/g,i=>i[1].toUpperCase()),u=r[0].toUpperCase()+r.slice(1);jn.prototype[`is${u}Enabled`]=function(){return this.isLevelEnabled(t)},jn.prototype[r]=function(...i){this.log(t,...i)}}Fe.levels.forEach($i),wi.addListener(()=>{Fe.levels.forEach($i)});var vl=jn;const Ze=qe,Bl=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';function $l(e){return e.originalUrl||e.url}function Ol(e,t,n){const r=i=>{const o=i.concat();for(let s=0;s<o.length;++s)for(let a=s+1;a<o.length;++a)o[s].token==o[a].token&&o.splice(a--,1);return o},u=[];return u.push({token:":url",replacement:$l(e)}),u.push({token:":protocol",replacement:e.protocol}),u.push({token:":hostname",replacement:e.hostname}),u.push({token:":method",replacement:e.method}),u.push({token:":status",replacement:t.__statusCode||t.statusCode}),u.push({token:":response-time",replacement:t.responseTime}),u.push({token:":date",replacement:new Date().toUTCString()}),u.push({token:":referrer",replacement:e.headers.referer||e.headers.referrer||""}),u.push({token:":http-version",replacement:`${e.httpVersionMajor}.${e.httpVersionMinor}`}),u.push({token:":remote-addr",replacement:e.headers["x-forwarded-for"]||e.ip||e._remoteAddress||e.socket&&(e.socket.remoteAddress||e.socket.socket&&e.socket.socket.remoteAddress)}),u.push({token:":user-agent",replacement:e.headers["user-agent"]}),u.push({token:":content-length",replacement:t.getHeader("content-length")||t.__headers&&t.__headers["Content-Length"]||"-"}),u.push({token:/:req\[([^\]]+)]/g,replacement(i,o){return e.headers[o.toLowerCase()]}}),u.push({token:/:res\[([^\]]+)]/g,replacement(i,o){return t.getHeader(o.toLowerCase())||t.__headers&&t.__headers[o]}}),r(n.concat(u))}function Oi(e,t){for(let n=0;n<t.length;n++)e=e.replace(t[n].token,t[n].replacement);return e}function xl(e){let t=null;if(e instanceof RegExp&&(t=e),typeof e=="string"&&(t=new RegExp(e)),Array.isArray(e)){const n=e.map(r=>r.source?r.source:r);t=new RegExp(n.join("|"))}return t}function bl(e,t,n){let r=t;if(n){const u=n.find(i=>{let o=!1;return i.from&&i.to?o=e>=i.from&&e<=i.to:o=i.codes.indexOf(e)!==-1,o});u&&(r=Ze.getLevel(u.level,r))}return r}var Nl=function(t,n){typeof n=="string"||typeof n=="function"?n={format:n}:n=n||{};const r=t;let u=Ze.getLevel(n.level,Ze.INFO);const i=n.format||Bl;return(o,s,a)=>{if(typeof o._logging<"u")return a();if(typeof n.nolog!="function"){const D=xl(n.nolog);if(D&&D.test(o.originalUrl))return a()}if(r.isLevelEnabled(u)||n.level==="auto"){const D=new Date,{writeHead:c}=s;o._logging=!0,s.writeHead=(d,E)=>{s.writeHead=c,s.writeHead(d,E),s.__statusCode=d,s.__headers=E||{}};let l=!1;const f=()=>{if(l)return;if(l=!0,typeof n.nolog=="function"&&n.nolog(o,s)===!0){o._logging=!1;return}s.responseTime=new Date-D,s.statusCode&&n.level==="auto"&&(u=Ze.INFO,s.statusCode>=300&&(u=Ze.WARN),s.statusCode>=400&&(u=Ze.ERROR)),u=bl(s.statusCode,u,n.statusRules);const d=Ol(o,s,n.tokens||[]);if(n.context&&r.addContext("res",s),typeof i=="function"){const E=i(o,s,F=>Oi(F,d));E&&r.log(u,E)}else r.log(u,Oi(i,d));n.context&&r.removeContext("res")};s.on("end",f),s.on("finish",f),s.on("error",f),s.on("close",f)}return a()}};const xi=Y("log4js:recording"),Kt=[];function Tl(){return function(e){xi(`received logEvent, number of events now ${Kt.length+1}`),xi("log event was ",e),Kt.push(e)}}function bi(){return Kt.slice()}function Ni(){Kt.length=0}var _l={configure:Tl,replay:bi,playback:bi,reset:Ni,erase:Ni};const Ne=Y("log4js:main"),Il=Ue,Ml=fo({proto:!0}),kl=Ve,Ll=Er,jl=qe,Ti=Ci,_i=Ai,Pl=vl,Rl=mn,Wl=Nl,zl=_l;let Et=!1;function Ul(e){if(!Et)return;Ne("Received log event ",e),_i.appendersForCategory(e.categoryName).forEach(n=>{n(e)})}function Jl(e){Ne(`Loading configuration from ${e}`);try{return JSON.parse(Il.readFileSync(e,"utf8"))}catch(t){throw new Error(`Problem reading config from file "${e}". Error was ${t.message}`,t)}}function Ii(e){Et&&Mi();let t=e;return typeof t=="string"&&(t=Jl(e)),Ne(`Configuration is ${t}`),kl.configure(Ml(t)),Rl.onMessage(Ul),Et=!0,ki}function Vl(){return zl}function Mi(e=()=>{}){if(typeof e!="function")throw new TypeError("Invalid callback passed to shutdown");Ne("Shutdown called. Disabling all log writing."),Et=!1;const t=Array.from(Ti.values());Ti.init(),_i.init();const n=t.reduce((o,s)=>s.shutdown?o+1:o,0);n===0&&(Ne("No appenders with shutdown functions found."),e());let r=0,u;Ne(`Found ${n} appenders with shutdown functions.`);function i(o){u=u||o,r+=1,Ne(`Appender shutdowns complete: ${r} / ${n}`),r>=n&&(Ne("All shutdown functions completed."),e(u))}t.filter(o=>o.shutdown).forEach(o=>o.shutdown(i))}function ql(e){return Et||Ii(process.env.LOG4JS_CONFIG||{appenders:{out:{type:"stdout"}},categories:{default:{appenders:["out"],level:"OFF"}}}),new Pl(e||"default")}const ki={getLogger:ql,configure:Ii,shutdown:Mi,connectLogger:Wl,levels:jl,addLayout:Ll.addLayout,recording:Vl};var Pn=ki,Li=(e=>(e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO",e.DEBUG="DEBUG",e.TRACE="TRACE",e))(Li||{});class ji{static configure(t,n){Pn.configure({appenders:{file:{type:"fileSync",filename:`${t}`,maxLogSize:5*1024*1024,backups:5,compress:!0,encoding:"utf-8",layout:{type:"pattern",pattern:"[%d] [%p] [%z] [ArkAnalyzer] - %m"}},console:{type:"console",layout:{type:"pattern",pattern:"[%d] [%p] [%z] [ArkAnalyzer] - %m"}}},categories:{default:{appenders:["console"],level:"info",enableCallStack:!1},codelinter:{appenders:["file"],level:n,enableCallStack:!0}}})}static getLogger(){return Pn.getLogger("codelinter")}static setLogLevel(t){Pn.getLogger("codelinter").level=t}}const Te=ji.getLogger();var Gl=(e=>(e[e.ETS=0]="ETS",e[e.TS=1]="TS",e))(Gl||{});const Pi={ignores:[".git",".preview",".hvigor",".idea","test","ohosTest"],include:/(?<!\.d)\.(ets|ts|json5)$/};function Hl(e){return de.existsSync(e)?Kn.parse(de.readFileSync(e,"utf-8")):{}}class Ri{constructor(){this.statistics=[[0,0],[0,0]]}async init(t,n,r,u){this.tsModule=await require(z.join(t,"node_modules/typescript")),this.processUIModule=await require(z.join(t,"lib/process_ui_syntax")),this.preProcessModule=await require(z.join(t,"lib/pre_process.js")),this.compilerOptions=this.tsModule.readConfigFile(z.resolve(t,"tsconfig.json"),this.tsModule.sys.readFile).config.compilerOptions,this.compilerOptions.target="ESNext",this.compilerOptions.sourceMap=!1;let i=await require(z.join(t,"main"));this.projectConfig=i.projectConfig,this.projectConfig.projectPath=z.resolve(n),this.projectConfig.saveTsPath=z.resolve(r,u),this.projectConfig.buildMode="release",this.projectConfig.projectRootPath=".",this.resolveSdkApi(),i.partialUpdateConfig.partialUpdateMode=!0,this.ohPkgContentMap=new Map}async compileProject(){process.env.rawFileResource="./",process.env.compileMode="moduleJson",process.env.compiler="on",Te.info("Ets2ts-getAllEts start");let t=new Map;this.getAllEts(this.projectConfig.projectPath,t)&&this.mkOutputPath(this.projectConfig.projectPath),Te.info("Ets2ts-getAllEts done"),t.forEach((n,r)=>{r.endsWith(".ets")?this.compileEts(r,n):this.cp2output(r)}),Te.info(`Ets2ts-compileEtsTime: ${this.statistics[0][1]/1e3}s, cnt: ${this.statistics[0][0]}, avg time: ${this.statistics[0][1]/this.statistics[0][0]}ms`),Te.info(`Ets2ts-copyTsTime: ${this.statistics[1][1]/1e3}s, cnt: ${this.statistics[1][0]}, avg time: ${this.statistics[1][1]/this.statistics[1][0]}ms`)}emitWarning(t){Te.warn(t)}emitError(t){Te.error(t)}compileEts(t,n){this.resourcePath=t;let r=new Date().getTime(),u="",i=new Map;for(let a of n){this.ohPkgContentMap.has(a)||this.ohPkgContentMap.set(a,Hl(a));let D=this.ohPkgContentMap.get(a);if(D&&D.hasOwnProperty("dependencies")){let c=D.dependencies;Object.entries(c).forEach((l,f)=>{let d=Hi.parse(l[1]).path;if(d){let E=z.resolve(z.join(z.dirname(a),d)).replace(new RegExp("\\"+z.sep,"g"),"/");i.set(l[0],E),u==""?u=l[0]:u+="|"+l[0]}})}}let o=de.readFileSync(t,"utf8");if(u.length>0){const a=new RegExp(`(import)\\s+(?:(.+)|\\{([\\s\\S]+)\\})\\s+from\\s+['"](`+u+`)(\\S+)['"]`,"g");o=o.replace(a,(D,...c)=>i.has(c[3])?D.replace(c[3],i.get(c[3])):D)}this.preProcessModule(o),this.tsModule.transpileModule(o,{compilerOptions:this.compilerOptions,fileName:`${t}`,transformers:{before:[this.processUIModule.processUISyntax(null,!1),this.getDumpSourceTransformer(this,i)]}}),o=void 0;let s=new Date().getTime();this.statistics[0][0]++,this.statistics[0][1]+=s-r}mkOutputPath(t){let n=this.getOutputPath(t);de.mkdirSync(n,{recursive:!0})}getOutputPath(t){let n=z.relative(this.projectConfig.projectPath,t);return z.join(this.projectConfig.saveTsPath,n)}cp2output(t){let n=new Date().getTime(),r=this.getOutputPath(t);de.cpSync(t,r);let u=new Date().getTime();this.statistics[1][0]++,this.statistics[1][1]+=u-n}getAllEts(t,n,r=[]){let u=!1,i=de.readdirSync(t,{withFileTypes:!0}),o=[];o.push(...r);for(let s of i)if(s.name=="oh-package.json5"){o.push(z.resolve(t,s.name));break}return i.forEach(s=>{const a=z.resolve(t,s.name);s.isDirectory()&&!Pi.ignores.includes(s.name)?this.getAllEts(a,n,o)&&(u=!0,this.mkOutputPath(a)):z.basename(a).match(Pi.include)&&(n.set(a,o),u=!0)}),u}getDumpSourceTransformer(t,n){return r=>{function u(i){const o=t.tsModule.createPrinter({newLine:t.tsModule.NewLineKind.LineFeed}),s={sourceMap:!0},a={sourceMap:!0,inlineSourceMap:!1,inlineSources:!1,sourceRoot:"",mapRoot:"",extendedDiagnostics:!1},D=t.tsModule.createCompilerHost(s),c=i.fileName,l=t.tsModule.createSourceMapGenerator(D,t.tsModule.getBaseFileName(c),"","",a),f=t.tsModule.createTextWriter(t.tsModule.getNewLineCharacter({newLine:t.tsModule.NewLineKind.LineFeed,removeComments:!1}));return o.writeFile(i,f,l),{content:f.getText(),sourceMapJson:l.toJSON()}}return i=>{let o=u(i),s=t.getOutputPath(i.fileName);s.endsWith(".ets")&&(s=s.replace(/\.ets$/,".ts"));let a="";if(n.forEach(D=>{a==""?a=D:a+="|"+D}),a.length>0){const D=new RegExp(`(import)\\s+(?:(.+)|\\{([\\s\\S]+)\\})\\s+from\\s+['"](`+a+`)(\\S+)['"]`,"g");o.content=o.content.replace(D,(c,...l)=>{let f=z.relative(z.dirname(i.fileName),l[3]).replace(new RegExp("\\"+z.sep,"g"),"/");return c.replace(l[3],f)})}return de.writeFileSync(s,o.content),de.writeFileSync(s+".map",JSON.stringify(o.sourceMapJson)),i.statements=[],i.text="",i.original=void 0,i}}}resolveSdkApi(){let t=z.join(this.projectConfig.projectPath,"build-profile.json5");if(de.existsSync(t)){let n=Kn.parse(de.readFileSync(t,"utf-8")),r=n.app?.compileSdkVersion||n.app?.products[0]?.compileSdkVersion,u=n.app?.compatibleSdkVersion||n.app?.products[0]?.compatibleSdkVersion;this.projectConfig.minAPIVersion=this.parseApiVersion(u||r)}}parseApiVersion(t){if(typeof t=="number")return t;const n=/\s*([1-9].[0-9].[0-9])\s*\(\s*(\d+)\s*\)\s*$/g.exec(t);return n?parseInt(n[2]):9}}async function Wi(e,t,n,r){let u=new Ri;await u.init(e,t,n,r),await u.compileProject()}(async function(){ji.configure(process.argv[6],Li.TRACE),Te.info("start ets2ts ",process.argv);const e=new Date().getTime();await Wi(process.argv[2],process.argv[3],process.argv[4],process.argv[5]);const t=new Date().getTime();Te.info(`ets2ts took: ${(t-e)/1e3}s`)})(),exports.Ets2ts=Ri,exports.runEts2Ts=Wi;
